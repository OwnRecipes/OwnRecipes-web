"use strict";(self.webpackChunkownrecipes_web=self.webpackChunkownrecipes_web||[]).push([[219],{8437:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(2791),i=r(3504),s=r(2677),a=r(9140),l=r(9743),o=r(1694),u=r.n(o),c=r(92),d=r(1884),f=r(4858),h=r(184);function p(e){if(e.photoThumbnail)return e.photoThumbnail;var t=["fish","fried-eggs","pizza","soup","steak"];return(0,d.xb)("/images/".concat(t[Math.floor(Math.random()*t.length)],".jpg"))}var g=function(e){var t=e.data,r=e.onOpenRecipe,o=(0,n.useMemo)((function(){return(0,d.uS)()}),[]),g=null===t||void 0===t?void 0:t.map((function(e){var t=(0,d.qC)("/recipe/".concat(e.slug));return(0,h.jsx)(s.Z,{children:(0,h.jsx)(a.Z,{className:u()("recipe"),children:(0,h.jsxs)(i.rU,{to:t,onClick:function(){return r(e)},children:[(0,h.jsx)(a.Z.Img,{variant:"top",src:p(e),alt:"",placeholder:o}),(0,h.jsx)(a.Z.Title,{as:"h3",children:(0,h.jsx)(f.Z,{id:e.slug,tooltip:e.title,placement:"bottom",className:"card-title-tooltip",children:e.title})}),(0,h.jsx)("div",{children:(0,h.jsx)(c.Z,{stars:e.rating})}),(0,h.jsx)(a.Z.Text,{children:e.info})]})})},e.id)}));return(0,h.jsx)(l.Z,{xs:1,sm:2,lg:4,className:"g-4 recipes-list",children:g})}},9096:function(e,t,r){var n=r(9743),i=r(2677),s=r(9551),a=r(184);t.Z=function(){return(0,a.jsx)(n.Z,{children:(0,a.jsx)(i.Z,{xs:12,children:(0,a.jsx)(n.Z,{id:"browse",children:(0,a.jsx)("div",{className:"spinner",children:(0,a.jsx)(s.Z,{})})})})})}},2567:function(e,t){t.Z={limit:12,ordering:"-pub_date"}},1219:function(e,t,r){r.r(t),r.d(t,{buildSearchString:function(){return ee},buildSearchUrl:function(){return te},default:function(){return re},mergeDefaultFilters:function(){return $}});var n=r(885),i=r(2791),s=r(3539),a=r(6871),l=r(3504),o=r(2296),u=r(5534),c=(r(4658),r(9743)),d=r(2677),f=r(2896),h=r(1413),p=r(7572),g=r(8263),v=r(7728),m=r(9648),x=r(1884),b=r(9656),_=function(e){var t={};return Object.keys(e).forEach((function(r){["limit","offset"].includes(r)||(t[r]=e[r])})),t},Z=r(1694),j=r.n(Z),y=r(6221),S=r(3360),M=r(9140),C=r(8949),U=r(78),N=r(4858),E=r(9276),w=r(184),k=(0,y.vU)({filter_active:{id:"filter.active",description:"Hint for ScreenReader that the filter is active",defaultMessage:"active"}}),q=function(e){var t=e.title,r=e.qsTitle,n=e.data,a=e.qs,o=e.multiSelect,u=e.cssClass,c=e.buildUrl,d=e.sort,f=(0,s.Z)(),p=f.formatMessage,g=(0,i.useMemo)((function(){var e,t=(null!==(e=null===n||void 0===n?void 0:n.map((function(e){var t=!1;if(a[r]&&a[r].split(",").includes(e.slug)&&(t=!0),t||null!=e.total&&0!==e.total)return(0,h.Z)((0,h.Z)({},e),{},{label:(0,x.kT)(f,"".concat(r,"."),e.title),active:t})})))&&void 0!==e?e:[]).filter((function(e){return null!=e}));return null!=d&&"on"!==d||(t=t.sort(x.hF)),t}),[n,a,r]),v=(0,i.useMemo)((function(){var e;return null!==(e=g.map((function(e){return(0,w.jsx)("li",{children:(0,w.jsx)(E.Z,{condition:e.label.length>10,render:function(t){return(0,w.jsx)(N.Z,{id:e.title,tooltip:e.label,placement:"bottom",className:"filter-title-tooltip",children:t})},children:(0,w.jsxs)(l.rU,{to:c(r,e.slug,o),className:j()("list-group-item list-group-item-action",{active:e.active}),children:[(0,w.jsx)("span",{className:"name",children:e.label}),(0,w.jsx)("span",{className:"count",children:"(".concat(e.total,")")}),e.active&&(0,w.jsx)(U.Z,{icon:"x-square",variant:"light","aria-hidden":"true"}),(0,w.jsx)("span",{className:"sr-only",children:p(k.filter_active)})]})})},e.slug)})))&&void 0!==e?e:[]}),[g,r,o,c]);return null!=n&&0===v.length?null:(0,w.jsxs)(C.Z.Item,{eventKey:r,className:j()("filter-group",u),children:[(0,w.jsx)(C.Z.Header,{as:"h3",className:"list-group-title",children:t}),(0,w.jsx)(C.Z.Body,{as:"ul",className:"filter-list",children:v})]})},T=(0,y.vU)({reset:{id:"filter.reset",description:"Filter reset",defaultMessage:"Reset"},filter_course:{id:"filter.filter_course",description:"Filter field course",defaultMessage:"Courses"},filter_cuisine:{id:"filter.filter_cuisine",description:"Filter field cuisine",defaultMessage:"Cuisines"},filter_rating:{id:"filter.filter_rating",description:"Filter field rating",defaultMessage:"Ratings"},filter_tag:{id:"filter.filter_tag",description:"Filter field tag",defaultMessage:"Tags"},title:{id:"filter.title",description:"Title",defaultMessage:"Title"},rating:{id:"filter.rating",description:"rating",defaultMessage:"Rating"},pub_date:{id:"filter.pub_date",description:"pub_date",defaultMessage:"Created Date"},filters:{id:"filter.filters",description:"Filters",defaultMessage:"Filters"},show_filters:{id:"filter.show_filters",description:"Show Filters",defaultMessage:"Show Filters"},hide_filters:{id:"filter.hide_filters",description:"Hide Filters",defaultMessage:"Hide Filters"},reset_filters:{id:"filter.reset_filters",description:"Reset Filters",defaultMessage:"Reset Filters"},filter_ordering:{id:"filter.filter_ordering",description:"Filter field ordering",defaultMessage:"Ordering"},x_stars:{id:"filter.x_stars",description:"X Stars",defaultMessage:"{rating, number} stars"}}),R=function(e){var t=e.qs,r=e.courses,a=e.cuisines,o=e.ratings,u=e.tags,c=e.hasActiveFilter,d=e.resetFilterUrl,f=e.openFilters,h=e.setOpenFilters,p=e.buildUrl,g=(0,s.Z)().formatMessage,v=(0,i.useState)(!1),m=(0,n.Z)(v,2),x=m[0],b=m[1],_=(0,i.useCallback)((function(){b((function(e){return!e}))}),[]),Z=(0,w.jsxs)("div",{className:"sidebar-header",children:[(0,w.jsx)("h2",{children:(0,w.jsxs)(S.Z,{type:"button",variant:"transparent",className:"filter-header",onClick:_,children:[g(x?T.hide_filters:T.show_filters),(0,w.jsx)(U.Z,{icon:x?"chevron-up":"chevron-down",variant:"light",className:j()({"reset-margin":c})})]})}),c&&(0,w.jsx)("div",{className:"filter-header-clear",children:(0,w.jsx)(l.rU,{className:"clear-filter-mobile btn btn-transparent",to:d,children:g(T.reset)})})]}),y=(0,i.useCallback)((function(e){var t=Array.isArray(e)?e:[null!==e&&void 0!==e?e:""];h(t)}),[]);return(0,w.jsxs)(M.Z,{children:[(0,w.jsx)(M.Z.Header,{className:"visible-xs",children:Z}),(0,w.jsxs)(M.Z.Header,{className:"hidden-xs filter-title",children:[(0,w.jsx)("h2",{children:g(T.filters)}),c&&(0,w.jsx)(l.rU,{className:"clear-filter-desktop btn btn-transparent",to:d,"aria-label":g(T.reset_filters),children:(0,w.jsx)(U.Z,{icon:"arrow-counterclockwise",variant:"light"})})]}),(0,w.jsxs)(M.Z.Text,{as:"div",className:j()("sidebar",{"hidden-xs":!x}),children:[(0,w.jsxs)(C.Z,{activeKey:f,flush:!0,alwaysOpen:!0,className:"filter-group-list",onSelect:y,children:[(0,w.jsx)(q,{title:g(T.filter_course),qsTitle:"course",data:r,qs:t,multiSelect:!0,buildUrl:p}),(0,w.jsx)(q,{title:g(T.filter_cuisine),qsTitle:"cuisine",data:a,qs:t,multiSelect:!0,buildUrl:p}),(0,w.jsx)(q,{title:g(T.filter_rating),qsTitle:"rating",data:null===o||void 0===o?void 0:o.map((function(e){return{id:e.rating,rating:e.rating,total:e.total,slug:e.rating.toString(),title:g(T.x_stars,{rating:e.rating})}})),qs:t,multiSelect:!0,buildUrl:p,sort:"off"}),(0,w.jsx)(q,{title:g(T.filter_tag),qsTitle:"tag",data:u,qs:t,multiSelect:!0,buildUrl:p})]}),c&&(0,w.jsx)("div",{className:"row reset-search-row print-hidden hidden-xs",children:(0,w.jsx)(l.rU,{className:"btn btn-outline-danger reset-search hidden-xs",to:d,children:g(T.reset)})})]})]})},F=function(e){var t=e.qs,r=e.qsString,s=e.buildUrl,a=(0,b.I0)(),l=(0,b.v9)((function(e){return e.browse.browserFilter.courses.items})),o=(0,b.v9)((function(e){return e.browse.browserFilter.cuisines.items})),u=(0,b.v9)((function(e){return e.browse.browserFilter.ratings.items})),c=(0,b.v9)((function(e){return e.browse.browserFilter.tags.items})),d=(0,i.useState)(Object.keys(t)),f=(0,n.Z)(d,2),Z=f[0],j=f[1],y=t,S=function(){var e,t=[];Z.includes("course")&&null==(null===l||void 0===l?void 0:l[r])&&t.push((e=y,function(t){t((0,h.Z)({},(0,b.s_)(m.eG,v.o.LOADING))),(0,p.WY)().get(g.m.course_count).query(_(e)).then((function(r){return t((0,h.Z)((0,h.Z)({},(0,b.s_)(m.eG,v.o.GET_SUCCESS)),{},{id:(0,x.pj)(e),payload:r.body.results}))})).catch((function(e){return t((0,p.S3)(e,m.eG))}))})),Z.includes("cuisine")&&null==(null===o||void 0===o?void 0:o[r])&&t.push(function(e){return function(t){t((0,h.Z)({},(0,b.s_)(m.J_,v.o.LOADING))),(0,p.WY)().get(g.m.cuisine_count).query(_(e)).then((function(r){return t((0,h.Z)((0,h.Z)({},(0,b.s_)(m.J_,v.o.GET_SUCCESS)),{},{id:(0,x.pj)(e),payload:r.body.results}))})).catch((function(e){return t((0,p.S3)(e,m.J_))}))}}(y)),Z.includes("rating")&&null==(null===u||void 0===u?void 0:u[r])&&t.push(function(e){return function(t){t((0,h.Z)({},(0,b.s_)(m.Jf,v.o.LOADING))),(0,p.WY)().get(g.m.rating_count).query(_(e)).then((function(r){return t((0,h.Z)((0,h.Z)({},(0,b.s_)(m.Jf,v.o.GET_SUCCESS)),{},{id:(0,x.pj)(e),payload:r.body.results}))})).catch((function(e){return t((0,p.S3)(e,m.Jf))}))}}(y)),Z.includes("tag")&&null==(null===c||void 0===c?void 0:c[r])&&t.push(function(e){return function(t){t((0,h.Z)({},(0,b.s_)(m.AY,v.o.LOADING))),(0,p.WY)().get(g.m.tag_count).query(_(e)).then((function(r){return t((0,h.Z)((0,h.Z)({},(0,b.s_)(m.AY,v.o.GET_SUCCESS)),{},{id:(0,x.pj)(e),payload:r.body.results}))})).catch((function(r){404===r.status?t((0,h.Z)((0,h.Z)({},(0,b.s_)(m.AY,v.o.GET_SUCCESS)),{},{id:(0,x.pj)(e),payload:[]})):t((0,p.S3)(r,m.AY))}))}}(y));for(var n=0,i=function(e){setTimeout((function(){a(t[e])}),n),n+=50},s=0;s<t.length;++s)i(s)};(0,i.useEffect)((function(){S()}),[S,r,Z]);var M=(0,i.useMemo)((function(){if(t.search){var e=new URLSearchParams({search:t.search}).toString();return(0,x.qC)("/browser?".concat(e))}return(0,x.qC)("/browser")}),[t]),C=0!==Object.keys(t).filter((function(e){return!["limit","ordering","offset","search"].includes(e)})).length;return(0,w.jsx)(R,{courses:null===l||void 0===l?void 0:l[r],cuisines:null===o||void 0===o?void 0:o[r],ratings:null===u||void 0===u?void 0:u[r],tags:null===c||void 0===c?void 0:c[r],qs:t,hasActiveFilter:C,resetFilterUrl:M,openFilters:Z,setOpenFilters:j,buildUrl:s})},O=r(355),A=r(1728),I=r(7538),G=r(7415),W=(0,y.vU)({search_title:{id:"searchbar.title",description:"Heading for the search page",defaultMessage:"Search"},input_placeholder:{id:"searchbar.placeholder",description:"SearchBar input placeholder",defaultMessage:"Enter a title, tag, or ingredient"},input_clear:{id:"input.clear",description:"Button to clear the input value (text)",defaultMessage:"Clear input"}}),D=function(e){var t=e.value,r=e.doSearch,a=(0,s.Z)().formatMessage,l=(0,i.useState)({value:null!==t&&void 0!==t?t:""}),o=(0,n.Z)(l,2),c=o[0],d=o[1],f=(0,i.useRef)(null!==t&&void 0!==t?t:"");(0,i.useEffect)((function(){c.value!==t&&d({value:t})}),[t]),(0,i.useEffect)((function(){f.current!==c.value&&(r(c.value),f.current=c.value)}),[c]);var h=(0,i.useCallback)((function(e,t){d((function(r){var n=u.Z(r);return O.Z(n,e,t),n}))}),[]),p=(0,i.useCallback)((function(){d({value:""})}),[]),g=(0,w.jsx)(G.Z,{position:"end",children:(0,w.jsx)(A.Z,{id:"clear_search_input",variant:"secondary",className:"search-clear",onClick:p,"aria-label":a(W.input_clear),children:(0,w.jsx)(U.Z,{icon:"x",variant:"light",size:"2x"})})});return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("h1",{className:"sr-only",children:a(W.search_title)}),(0,w.jsx)(I.ZP,{name:"value",value:c.value,placeholder:a(W.input_placeholder),required:!0,inputAdornmentStart:(0,w.jsx)(U.Z,{icon:"search",variant:"light"}),inputAdornmentEnd:c.value.length>0?g:void 0,onChange:h,debounceTimeout:400,className:"search-bar"})]})},L=r(9096),Y=r(9723),P=r(1127),B=r(2567),H=(0,y.vU)({search_summary_results:{id:"searchsummary.results",description:"Number of results, if there is no pagination.",defaultMessage:"{resultsCount, plural, one {# result} other {# results}}"},search_summary_results_pagination:{id:"searchsummary.results_pagination",description:"Number of results, with pagination from - to.",defaultMessage:"{offset}-{offsetLast} of {resultsCount} results"},search_summary_sort_by:{id:"searchsummary.sort_by",description:"Sort by title/...",defaultMessage:"Sort by: {sort}"},sort_by_pub_date:{id:"sort_by.pub_date",defaultMessage:"Create date"},sort_by_rating:{id:"sort_by.rating",defaultMessage:"Rating"},sort_by_title:{id:"sort_by.title",defaultMessage:"Title"}});function V(e){return e.startsWith("-")?e.substring(1):e}var J=function(e){var t,r,n=e.search,a=e.qs,o=e.buildUrl,u=(0,s.Z)(),c=u.formatMessage,d=null!==(t=null===n||void 0===n?void 0:n.totalRecipes)&&void 0!==t?t:0,f=(0,x.yY)(a.offset,0),h=(0,x.yY)(a.limit,null!==(r=B.Z.limit)&&void 0!==r?r:12),p=null!=n&&n.totalRecipes>h,g=null!=a.ordering?V(a.ordering):V("-pub_date"),v=(0,i.useCallback)((function(e,t){g===t&&e.preventDefault()}),[g]),m=["title","-pub_date"].map((function(e){var t=V(e);return(0,w.jsx)(Y.Z.Item,{as:l.rU,to:o("ordering",e),active:g===t,onClick:function(e){return v(e,t)},children:(0,x.kT)(u,"sort_by.",t)},e)}));return(0,w.jsxs)("div",{className:"search-summary",children:[(0,w.jsxs)(P.Z,{className:"results",children:[p&&c(H.search_summary_results_pagination,{offset:f+1,offsetLast:Math.min(f+h,d),resultsCount:d}),!p&&c(H.search_summary_results,{resultsCount:d})]}),(0,w.jsxs)(Y.Z,{className:"sort-by-dropdown",children:[(0,w.jsx)(Y.Z.Toggle,{variant:"outline-primary",id:"sort-by-button",disabled:null==n,children:c(H.search_summary_sort_by,{sort:(0,x.kT)(u,"sort_by.",g)})}),(0,w.jsx)(Y.Z.Menu,{children:m})]})]})},z=function(e){var t,r=e.search,n=e.qs,i=e.qsString,s=e.buildUrl,a=e.doSearch,l=e.onOpenRecipe,o=null!=r&&Object.keys(r).length>0,u=null===r||void 0===r?void 0:r[i];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(D,{value:null!==(t=n.search)&&void 0!==t?t:"",doSearch:a}),(0,w.jsx)(J,{qs:n,search:u,buildUrl:s}),!o&&(0,w.jsx)(L.Z,{}),o&&(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(d.Z,{xs:12,className:"filter-panel",children:(0,w.jsx)(F,{qs:n,qsString:i,buildUrl:s})}),(0,w.jsx)(d.Z,{xs:12,className:"results-panel",children:(0,w.jsx)(f.Z,{qs:n,qsString:i,buildUrl:s,onOpenRecipe:l})})]})]})},K=r(5404),X=r(297),Q=r(3976);function $(e,t){var r={};return Object.keys(e).forEach((function(t){r[t]=String(e[t])})),o.Z(r,t)}function ee(e,t,r){var n=u.Z(t);delete n.offset,""!==r?n.search=r:delete n.search;var i=(0,x.pj)(n);return(0,x.qC)(i?"/".concat(e,"?").concat(i):"/".concat(e))}function te(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!r)return(0,x.qC)("/".concat(e));var s=u.Z(t);if(delete s.offset,""!==n)if(s[r]&&i){var a=s[r].split(",");if(a.includes(n.toString()))if(1===a.length)delete s[r];else{var l="";a.map((function(e){e!=n&&(l+=e+",")})),s[r]=l.substring(0,l.length-1)}else s[r]="".concat(s[r],",").concat(n)}else s[r]=n;else delete s[r];var o=(0,x.pj)(s);return(0,x.qC)(o?"/".concat(e,"?").concat(o):"/".concat(e))}var re=function(){var e=(0,s.Z)(),t=(0,b.I0)(),r=(0,a.s0)(),o=(0,l.lr)(),u=(0,n.Z)(o,1)[0],c=(0,b.v9)((function(e){return e.browse.browserSearch.items})),d=(0,i.useMemo)((function(){return Object.fromEntries(u)}),[u]),f=(0,i.useMemo)((function(){return $(B.Z,d)}),[B.Z,d]),h=(0,i.useMemo)((function(){return(0,x.pj)(f)}),[f]);(0,i.useEffect)((function(){t(K.I(f))}),[u]);var p=(0,i.useCallback)((function(e,t){return te("browser",d,e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2])}),[te,d]),g=(0,i.useCallback)((function(e){var t=ee("browser",d,e);r(t)}),[ee,d,r]),v=(0,i.useCallback)((function(e){t(X.MA(e))}),[t]);return(0,w.jsx)(Q.Z,{title:e.messages["nav.recipes"],children:(0,w.jsx)(z,{qs:f,qsString:h,buildUrl:p,doSearch:g,onOpenRecipe:v,search:c})})}},2896:function(e,t,r){r.d(t,{Z:function(){return w}});var n=r(885),i=r(2791),s=r(6221),a=r(3539),l=r(9656),o=r(9511),u=r(2567),c=r(1694),d=r.n(c),f=r(1884),h=r(8437),p=r(8116),g=r(1413),v=r(557),m=r(3504),x=r(184),b=["title","offset","active","buildUrl","disabled","className"],_=(0,i.forwardRef)((function(e,t){var r=e.title,n=e.offset,s=e.active,a=e.buildUrl,l=e.disabled,o=e.className,u=(0,v.Z)(e,b),c=(0,i.useCallback)((function(e){(s||l)&&e.preventDefault()}),[s,l]);return(0,x.jsx)("li",(0,g.Z)((0,g.Z)({className:d()("page-item",o,{active:s,disabled:l})},u),{},{ref:t,children:(0,x.jsx)(m.rU,{className:d()("page-link","btn-outline-primary",{active:s,disabled:l}),to:l?"#":a("offset",n.toString()),onClick:c,children:r})}))})),Z=(0,s.vU)({pagination_previous:{id:"pagination.previous",description:"Button to previous pagination page",defaultMessage:"Previous"},pagination_next:{id:"pagination.next",description:"Button to next pagination page",defaultMessage:"Next"}});var j=function(e){var t=e.offset,r=e.limit,n=e.count,s=e.buildUrl,a=Math.ceil(n/r),l=Math.ceil(t/r)+1,o=(0,i.useMemo)((function(){return function(e,t){var r=[];if(t<=8){for(var n=1;n<=t;n++)r.push({index:n,role:"page"});return r}e>1&&r.push({index:1,role:"first"});var i=1,s=i;if(e>3){var a=Math.round((e-s)/2);s=e-a,r.push({index:s,role:"skipper-far"})}if(e>2){var l=Math.ceil((e-s)/3);e-l!==s&&(s=e-l,r.push({index:s,role:"skipper-near"}))}if(s=e,r.push({index:e,role:"page"}),s<t-1&&(s+=1,r.push({index:s,role:1===e?"first":"next"})),1===e&&(s+=1,r.push({index:s,role:"next"})),r.length<=4&&s<t-1&&(s+=1,r.push({index:s,role:"skipper-far"})),r.length<=4&&s<t-1&&(s+=1,r.push({index:s,role:"skipper-near"})),s<t-1){var o=r.length-1;if(i=t,s<t-2&&(i=s+Math.ceil((i-s)/2),r.push({index:i,role:"skipper-near"})),s<t-1){var u=Math.ceil((i-s)/3);u>0&&(i=s+u,r.splice(o+1,0,{index:i,role:"skipper-far"}))}}e!==t&&r.push({index:t,role:"last"});var c,d=r.findIndex((function(t){return t.index===e}));if(-1===d)throw new Error("Internal error: Page index not found.");for(;r.length<8&&d>0;)for(;d>0;){var f=r[d].index;if(f-r[d-1].index>1){r.splice(d,0,{index:f-1,role:(c=r.filter((function(e){return"skipper-far"!==e.role})).length,c<4?"next":c<6?"skipper-near":"skipper-far")});break}--d}return r}(l,a)}),[l,a]).map((function(e){return(0,x.jsx)(_,{title:e.index.toString(),offset:r*(e.index-1),active:l===e.index,buildUrl:s,className:e.role},e.index.toString())}));return(0,x.jsx)(x.Fragment,{children:o})},y=function(e){var t=e.offset,r=e.limit,n=e.count,i=e.buildUrl,s=(0,a.Z)().formatMessage,l=t+r,o=t-r;return n<=r?null:(0,x.jsx)("nav",{children:(0,x.jsxs)(p.Z,{children:[(0,x.jsx)(_,{title:"\u2190",offset:o,buildUrl:i,disabled:o<0,"aria-label":s(Z.pagination_previous)},"previous"),(0,x.jsx)(j,{offset:t,limit:r,buildUrl:i,count:n}),(0,x.jsx)(_,{title:"\u2192",offset:l,buildUrl:i,disabled:l>n,"aria-label":s(Z.pagination_previous)},"next")]})})},S=function(e){var t=e.pending,r=e.search,n=e.qs,s=e.defaults,a=e.buildUrl,l=e.onOpenRecipe,o=(0,i.useMemo)((function(){return(0,x.jsx)(h.Z,{data:r.recipes,onOpenRecipe:l})}),[r.recipes,l]),u=(0,i.useMemo)((function(){var e,t;return(0,x.jsx)(y,{limit:(0,f.yY)(n.limit,null!==(e=s.limit)&&void 0!==e?e:12),count:r.totalRecipes,offset:(0,f.yY)(n.offset,null!==(t=s.offset)&&void 0!==t?t:0),buildUrl:a})}),[r.totalRecipes,n,s,a,l]);return(0,x.jsxs)("div",{className:d()("results-container",{pending:t}),children:[o,u]})},M=r(1127),C=(0,s.vU)({no_results:{id:"browse.no_results",description:"No results header",defaultMessage:"There are no results for your search."}}),U=function(){var e=(0,a.Z)().formatMessage;return(0,x.jsx)(M.Z,{className:"no-results placeholder",children:e(C.no_results)})},N=r(9096),E=(0,s.vU)({search_results_heading:{id:"browse.results_heading",description:"Browser search results heading",defaultMessage:"Results"}}),w=function(e){var t=e.qs,r=e.qsString,s=e.buildUrl,c=e.onOpenRecipe,d=(0,a.Z)().formatMessage,f=(0,l.v9)((function(e){return e.browse.browserSearch})),h=f.meta.pending===o.V.LOADING,p=(0,i.useState)(void 0),g=(0,n.Z)(p,2),v=g[0],m=g[1];return(0,i.useEffect)((function(){var e;f.meta.pending===o.V.COMPLETED&&m(null===(e=f.items)||void 0===e?void 0:e[r])}),[f.meta.pending,f.items]),(0,i.useEffect)((function(){var e,t=null===(e=f.items)||void 0===e?void 0:e[r];t&&m(t)}),[r]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h2",{className:"sr-only",children:d(E.search_results_heading)}),h&&!v&&(0,x.jsx)(N.Z,{}),!h&&(null==v||0===v.recipes.length)&&(0,x.jsx)(U,{}),null!=v&&v.recipes.length>0&&(0,x.jsx)(S,{pending:h,search:v,qs:t,defaults:u.Z,buildUrl:s,onOpenRecipe:c})]})}},5404:function(e,t,r){r.d(t,{I:function(){return d},f:function(){return f}});var n=r(1413),i=r(7572),s=r(8263),a=r(3864),l=r(7728),o=r(1884),u=r(9656),c={cuisine:"cuisine__slug",course:"course__slug",tag:"tag__slug"},d=function(e){return function(t){t((0,n.Z)({},(0,u.s_)(a.V,l.o.LOADING)));var r={};Object.keys(e).forEach((function(t){null!==e[t]&&(r[t in c?c[t]:t]=e[t])})),(0,i.WY)().get(s.m.browse).query(r).then((function(r){var i=r.body;t((0,n.Z)((0,n.Z)({},(0,u.s_)(a.V,l.o.GET_SUCCESS)),{},{id:(0,o.pj)(e),payload:(0,a.D)(i)}))})).catch((function(e){t((0,i.S3)(e,a.V))}))}},f=function(e){return function(t){t((0,n.Z)({},(0,u.s_)(a.V,l.o.LOADING)));var r={};Object.keys(e).forEach((function(t){null!==e[t]&&(r[t in c?c[t]:t]=e[t])})),(0,i.WY)().get(s.m.mini_browse).query(r).then((function(r){var i=r.body;t((0,n.Z)((0,n.Z)({},(0,u.s_)(a.V,l.o.GET_SUCCESS)),{},{id:(0,o.pj)(e),payload:(0,a.D)(i)}))})).catch((function(e){t((0,i.S3)(e,a.V))}))}}},1728:function(e,t,r){var n=r(1413),i=r(557),s=r(2791),a=r(3360),l=(r(2467),r(9276)),o=r(4858),u=r(184),c=["id","tooltip","tooltipPlacement","children"],d=(0,s.forwardRef)((function(e,t){var r=e.id,s=e.tooltip,d=e.tooltipPlacement,f=e.children,h=(0,i.Z)(e,c);return(0,u.jsx)(l.Z,{condition:Boolean(s),render:function(e){return(0,u.jsx)(o.Z,{id:"".concat(r,"-tooltip"),tooltip:s,placement:d,children:e})},children:(0,u.jsx)(a.Z,(0,n.Z)((0,n.Z)({id:r,"aria-label":s||void 0,"aria-describedby":void 0},h),{},{ref:t,children:f}))})}));t.Z=d},3976:function(e,t,r){var n=r(2791),i=r(7022),s=r(6871),a=r(5694),l=r(1884),o=r(2605),u=r(184);function c(e){var t,r,n=e.startsWith(null!==(t=(0,l.dU)("PUBLIC_URL"))&&void 0!==t?t:"")?e.substring((null!==(r=(0,l.dU)("PUBLIC_URL"))&&void 0!==r?r:"").length):e,i=n.startsWith("/"),s=n.endsWith("/");return n.substring(i?1:0,s?n.length-1:void 0)}t.Z=function(e){var t=e.title,r=e.id,d=e.state,f=e.children,h=(0,s.s0)(),p=(0,s.TH)(),g=null===d||void 0===d?void 0:d.meta.error,v=(0,n.useContext)(a.Z);return(0,n.useEffect)((function(){document.title="".concat(null!=t&&t.length>0?"".concat(t," | "):"","OwnRecipes")}),[t]),(0,n.useEffect)((function(){if(g&&null==r){var e=(0,l.qC)("/NotFound");h(e)}}),[r,g]),(0,u.jsx)(i.Z,{id:"main-container",as:"main",className:c(p.pathname),style:{marginTop:"".concat(v.toolbarHeight,"px")},children:(0,u.jsx)(o.Z,{verbose:!0,printStack:!0,children:f})})}},92:function(e,t,r){r.d(t,{Z:function(){return d}});var n=r(2791),i=r(3539),s=r(6221),a=r(3360),l=r(78),o=r(9276),u=r(184),c=function(e){var t=e.stars,r=e.num,c=e.onChange,d=(0,i.Z)().formatMessage,f=(0,s.vU)({star_alt:{id:"rating_comments.star_alt",description:"Alt text for star button, for screen reader.",defaultMessage:"Select to rate item {stars, plural, one {# star} other {# stars}}"}}),h=(0,n.useCallback)((function(){null===c||void 0===c||c(r)}),[c,r]),p=t>r-1&&t<r,g=p?"star-half":"star",v=r>t||p?"light":"filled";return(0,u.jsx)(o.Z,{condition:null!=c,render:function(e){return(0,u.jsx)(a.Z,{variant:"transparent",className:"rating",onClick:h,children:e})},children:(0,u.jsx)(l.Z,{icon:g,variant:v,size:null!=c?"2x":"1x",ariaLabel:c?d(f.star_alt,{stars:r}):void 0},r)},r)},d=function(e){var t=e.stars,r=e.onChange,n=(0,i.Z)().formatMessage,a=(0,s.vU)({stars_alt:{id:"rating_comments.stars_alt",description:"Alt text for read-only stars (view).",defaultMessage:"{stars} out of 5 stars"}}),l=t;t>5?l=5:t<0&&(l=0);var o=Array.from({length:5},(function(e,t){return t+1})).map((function(e){return(0,u.jsx)(c,{stars:l,num:e,onChange:r},e)}));return(0,u.jsxs)("div",{className:"rating-stars",children:[(0,u.jsx)("span",{"aria-hidden":!0,children:o}),(0,u.jsx)("span",{className:"sr-only",children:n(a.stars_alt,{stars:l})})]})}},297:function(e,t,r){r.d(t,{MA:function(){return h},eI:function(){return d},ln:function(){return f},mc:function(){return p},y7:function(){return u},zD:function(){return c}});var n=r(1413),i=r(7572),s=r(8263),a=r(6879),l=r(7728),o=r(9656),u=function(e){return(0,n.Z)((0,n.Z)({},(0,o.s_)(a.yW,l.o.GET_SUCCESS)),{},{payload:e})},c=function(e){return function(t){t((0,n.Z)({},(0,o.s_)(a.yW,l.o.GET_START))),(0,i.WY)().get("".concat(s.m.recipe).concat(e,"/")).then((function(e){t(u((0,a.gl)(e.body)))})).catch((function(e){return t((0,i.S3)(e,a.yW))}))}},d=function(e,t){return function(r){r((0,n.Z)({},(0,o.s_)(a.yW,l.o.DELETE_START))),(0,i.WY)().delete("".concat(s.m.recipe).concat(t,"/")).then((function(){r((0,n.Z)((0,n.Z)({},(0,o.s_)(a.yW,a.M9.RECIPE_DELETE)),{},{payload:{id:e}}))})).catch((function(e){return r((0,i.S3)(e,a.yW))}))}},f=function(e,t){return function(r){r((0,n.Z)((0,n.Z)({},(0,o.s_)(a.yW,a.M9.RECIPE_INGREDIENT_SERVINGS_UPDATE)),{},{payload:{recipeSlug:e,customServings:t}}))}},h=function(e){return function(t){t((0,n.Z)((0,n.Z)({},(0,o.s_)(a.yW,l.o.PRELOAD)),{},{payload:e}))}},p=function(){return function(e){e((0,n.Z)({},(0,o.s_)(a.yW,l.o.RESET)))}}},4658:function(){}}]);
//# sourceMappingURL=219.6ee62831.chunk.js.map