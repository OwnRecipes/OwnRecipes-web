"use strict";(self.webpackChunkownrecipes_web=self.webpackChunkownrecipes_web||[]).push([[125],{1321:(e,t,n)=>{n.d(t,{A:()=>T});var s=n(5043),i=n(5386),a=n(3287),o=n(1437),r=n(3306),l=n(8602),d=n(3626),c=n(97),u=n(6178),m=n.n(u),p=n(8139),h=n.n(p),x=n(7341),v=n(2521),b=n(6641),f=n(2437),_=n(7772),g=n(6308),j=n(2235),E=n(962),A=n(579);const k=e=>{let{item:t,onHide:n}=e;(0,s.useEffect)((()=>{t.complete&&setTimeout((()=>{n(t)}),3500)}),[t.complete]);const i=(0,s.useCallback)((()=>{n(t)}),[t,n]);return t.complete?(0,A.jsx)(f.A,{id:`hide-completed-menu-item-${t.id}`,className:"menu-item-complete-transition",variant:"transparent",onClick:i,children:(0,A.jsx)(g.A,{icon:"check",variant:"light"})}):null};var C=n(7062),w=n(4764);const y=(0,d.YK)({mark_as_completed_button:{id:"menu_item.mark_as_completed_button",defaultMessage:"Mark as completed"},edit_button:{id:"menu_item.edit_button",defaultMessage:"Edit menu item"},delete_button:{id:"menu_item.delete_button",defaultMessage:"Remove menu item"},confirm_delete_message:{id:"menu_item.confirm_delete",description:"Are you sure you want to delete this item?",defaultMessage:"Are you sure you want to delete this item?"}}),M=e=>{let{items:t,onCompleteClick:n,onHideCompleted:i,onOpenRecipe:a,onDelete:o}=e;const r=(0,c.A)(),{formatMessage:l}=r,[d,u]=(0,s.useState)(void 0),p=(0,s.useCallback)((()=>{u(void 0)}),[]),[x,v]=(0,s.useState)(""),b=(0,s.useCallback)((()=>{v(null==(null===d||void 0===d?void 0:d.id)?"create":"update")}),[d]),M=(0,s.useCallback)((()=>{v("")}),[]),[O,N]=(0,s.useState)(void 0),S=(0,s.useCallback)((e=>{N(e)}),[]),T=(0,s.useCallback)((()=>{N(void 0)}),[]),$=(0,s.useCallback)((()=>{O&&(null===o||void 0===o||o(O))}),[O]),K=(0,s.useMemo)((()=>t.map((e=>({key:String(e.id),className:h()({completed:e.complete,active:m()(e.start_date).isSame(new Date,"day")}),...e.recipe_data,header:(0,A.jsx)("span",{children:`${m()(e.start_date).format("dddd")} (${m()(e.start_date).format("l")})`}),footer:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(_.M,{position:"end",className:"print-hidden",children:[(0,A.jsx)(f.A,{id:`complete-btn-menu-item-${e.id}`,variant:"outline-primary",tooltip:l(y.mark_as_completed_button),onClick:()=>n(e),style:{padding:0},children:(0,A.jsx)(g.A,{icon:"check",variant:"light",size:"2x"})}),(0,A.jsx)(f.A,{id:`edit-btn-menu-item-${e.id}`,variant:"outline-primary",tooltip:l(y.edit_button),onClick:()=>{u(e)},children:(0,A.jsx)(g.A,{icon:"pencil"})}),(0,A.jsx)(f.A,{id:`delete-btn-menu-item-${e.id}`,variant:"outline-danger",className:"menu-2x-button",tooltip:l(y.delete_button),onClick:()=>S(e),children:(0,A.jsx)(g.A,{icon:"x",variant:"light",size:"2x"})})]}),(0,A.jsx)(k,{item:e,onHide:i})]})})))),[t]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(j.A,{lg:4,data:K,onOpenRecipe:a}),(0,A.jsx)(C.A,{show:Boolean(d),item:d,onSaveSuccess:b,onClose:p}),(0,A.jsx)(w.A,{show:Boolean(x),created:"create"===x,onClose:M}),(0,A.jsx)(E.A,{show:Boolean(O),title:r.messages["recipe.confirm_delete_title"],acceptTitle:r.messages["recipe.confirm_delete_accept"],onAccept:$,onClose:T,acceptButtonProps:{variant:"danger"},children:l(y.confirm_delete_message)})]})},O=(0,d.YK)({no_items:{id:"menu.no_items",description:"Info that the user has no item on the menu.",defaultMessage:"(You don't have any item on your menu.)"},force_show_previous_button:{id:"menu.force_show_previous_button",description:"Show previous weeks button",defaultMessage:"Show previous weeks"},section_this_week:{id:"menu.section_this_week_heading",description:'Heading of the "This week (...)" section',defaultMessage:"This Week ({title})"},section_next_week:{id:"menu.section_next_week_heading",description:'Heading of the "Next week (...)" section',defaultMessage:"Next Week ({title})"},section_last_week:{id:"menu.section_last_week_heading",description:'Heading of the "Last week (...)" section',defaultMessage:"Last Week ({title})"}});function N(e,t){return m()(e.start_date).diff(m()(t.start_date))}const S=e=>{let{items:t,pending:n,withPast:i=!0,withDistantFuture:a=!0,className:o,onRender:r,onCompleteClick:d,onHideCompleted:u,onOpenRecipe:p,onDelete:j,...E}=e;const{formatMessage:k}=(0,c.A)(),[C,w]=(0,s.useState)(!1),y=(0,s.useCallback)((()=>{w(!0)}),[]),S=(0,s.useMemo)((()=>{const e=function(e,t,n){if(!e)return e;const s=m()().startOf("week");let i=e;if(t||(i=i.filter((e=>m()(e.start_date).diff(s)>=0))),!n){const e=m()().add(2,"week").startOf("week");i=i.filter((t=>m()(t.start_date).diff(e)<0))}return i}(null===t||void 0===t?void 0:t.sort(N),i||C,a),n=m()().add(1,"week").startOf("week").format("MMMM D"),s=m()().startOf("week").format("MMMM D"),o=m()().subtract(1,"week").startOf("week").format("MMMM D");return null===e||void 0===e?void 0:e.reduce(((e,t)=>{const i=t.start_date,a=m()(i).startOf("week").format("MMMM D");let r=`${a} - ${m()(i).endOf("week").format("MMMM D")}`;return s===a?r=k(O.section_this_week,{title:r}):n===a?r=k(O.section_next_week,{title:r}):o===a&&(r=k(O.section_last_week,{title:r})),"undefined"===typeof e[r]&&(e[r]=[]),e[r].push(t),e}),{})}),[t,i,a,C,k]),T=n===x.F.COMPLETED&&(null==t||0===t.length||null==S||0===Object.keys(S).length);return(0,s.useEffect)((()=>{null===r||void 0===r||r(S)}),[S]),(0,A.jsxs)("div",{className:h()("menu-plan",o),...E,children:[n===x.F.LOADING&&(null==t||0===t.length)&&(0,A.jsx)(b.A,{}),T&&(0,A.jsx)(v.A,{className:"placeholder",children:k(O.no_items)}),i&&!C&&(0,A.jsx)(_.M,{position:"center",children:(0,A.jsxs)(f.A,{id:"show-previous-menu-items-button",variant:"outline-primary",onClick:y,children:[(0,A.jsx)(g.A,{icon:"arrow-up",variant:"light",style:{marginRight:"0.25em"}}),k(O.force_show_previous_button)]})}),S&&t&&t.length>0&&(0,A.jsx)(l.A,{xs:12,className:"recipes",children:Object.keys(S).map((e=>(0,A.jsxs)(s.Fragment,{children:[(0,A.jsx)("h2",{className:"section-header",children:e}),(0,A.jsx)(M,{items:S[e],onCompleteClick:d,onHideCompleted:u,onOpenRecipe:p,onDelete:j})]},e)))})]})},T=e=>{let{...t}=e;const n=(0,i.wA)(),l=(0,i.d4)((e=>e.menuItems)),{items:d}=l;(0,s.useEffect)((()=>{n(o.Hh())}),[]);const c=(0,s.useCallback)((e=>{a.ng(n,e.id)}),[]),u=(0,s.useCallback)((e=>{n(a.qv(e.id))}),[]),m=(0,s.useCallback)((e=>{n(r.uv(e))}),[]),p=(0,s.useCallback)((e=>{n(a.TF(e.id))}),[]);return(0,A.jsx)(S,{items:d,pending:l.meta.pending,onCompleteClick:c,onHideCompleted:u,onOpenRecipe:m,onDelete:p,...t})}},2392:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var s=n(1072),i=n(97),a=n(8591),o=n(5043),r=n(9422),l=n(5328),d=n(3626),c=n(4949),u=n(1321),m=n(5386),p=n(1948),h=n(6746),x=n(6847),v=n(9140),b=n(2461);var f=n(6178),_=n.n(f),g=n(1318),j=n(4196),E=n(7341),A=n(2521),k=n(6641),C=n(5838),w=n(579);const y=(0,d.YK)({stats_recipe:{id:"stats.recipe",description:"Recipe column heading",defaultMessage:"Recipe"},stats_count:{id:"stats.count",description:"Count column heading",defaultMessage:"Count"},stats_last_made:{id:"stats.last_made",description:"Last Made column heading",defaultMessage:"Last Made"},no_stats:{id:"stats.no_stats",description:"Info that the user has not completed any menu item.",defaultMessage:"(You don't have a record of completed items.)"}}),M=e=>{let{stats:t,pending:n}=e;const{formatMessage:s}=(0,i.A)(),a=n===E.F.COMPLETED&&(null==t||0===t.length);return(0,w.jsxs)(w.Fragment,{children:[n===E.F.LOADING&&(null==t||0===t.length)&&(0,w.jsx)(k.A,{}),a&&(0,w.jsx)(A.A,{className:"placeholder",children:s(y.no_stats)}),t&&t.length>0&&(0,w.jsxs)(j.A,{striped:!0,id:"stats-table",children:[(0,w.jsx)("thead",{children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{children:s(y.stats_recipe)}),(0,w.jsx)("th",{children:s(y.stats_count)}),(0,w.jsx)("th",{children:s(y.stats_last_made)})]})}),(0,w.jsx)("tbody",{children:t.map((e=>(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{children:(0,w.jsx)("span",{children:(0,w.jsx)(g.N_,{to:(0,C.hp)(`/recipe/${e.slug}`),children:e.title})})}),(0,w.jsx)("th",{children:e.num_menuitems}),(0,w.jsx)("th",{children:_()(e.last_made).format("ddd, MMMM D, YYYY")})]},e.slug)))})]})]})},O=()=>{const e=(0,m.wA)(),t=(0,m.d4)((e=>e.menuStats)),{items:n}=t;return(0,o.useEffect)((()=>{e((e=>{e({...(0,m.OS)(b.E,x.h.GET_START)}),(0,p.Ay)().get(h.U.menu_stats).then((t=>{var n;e({...(0,m.OS)(b.E,x.h.GET_SUCCESS),payload:(null===(n=t.body)||void 0===n?void 0:n.map((e=>(0,b.p)(e))))||[]})})).catch((t=>e((0,v.H4)(t,b.E))))}))}),[]),(0,w.jsx)(M,{stats:n,pending:t.meta.pending})};var N=n(4764),S=n(7062);const T=(0,d.YK)({tab_menu:{id:"menu_plan.tab_menu",description:"Tab menu on the menu plan page",defaultMessage:"On The Menu"},tab_stats:{id:"menu_plan.tab_stats",description:"Tab stats on the menu plan page",defaultMessage:"History"},tab_new_menu_item:{id:"menu_plan.new_menu_item",description:"Button label to put a new item on the menu plan",defaultMessage:"+ Add Item"}}),$=()=>{const{formatMessage:e}=(0,i.A)(),[t,n]=(0,o.useState)("menuplan"),[s,a]=(0,o.useState)(void 0),d=(0,o.useCallback)((()=>{a(void 0)}),[]),[m,p]=(0,o.useState)(!1),h=(0,o.useCallback)((()=>{p(!0)}),[]),x=(0,o.useCallback)((()=>{p(!1)}),[]),v=(0,o.useCallback)((e=>{"new"===e?a({}):n(e||"menuplan")}),[]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(r.A,{id:"menu-plan-tabs",activeKey:t,onSelect:v,unmountOnExit:!0,mountOnEnter:!0,transition:!1,className:"print-hidden",children:[(0,w.jsx)(l.A,{eventKey:"menuplan",title:e(T.tab_menu),children:(0,w.jsx)(c.A,{verbose:!0,printStack:!0,children:(0,w.jsx)(u.A,{withPast:!1})})}),(0,w.jsx)(l.A,{eventKey:"stats",title:e(T.tab_stats),children:(0,w.jsxs)(c.A,{verbose:!0,printStack:!0,children:[(0,w.jsx)("div",{className:"print-only",children:(0,w.jsx)("h2",{children:e(T.tab_stats)})}),(0,w.jsx)(O,{})]})}),(0,w.jsx)(l.A,{eventKey:"new",title:e(T.tab_new_menu_item)})]}),(0,w.jsx)(S.A,{show:Boolean(s),item:s,onSaveSuccess:h,onClose:d}),(0,w.jsx)(N.A,{show:m,created:!0,onClose:x})]})},K=()=>{const e=(0,i.A)();return(0,w.jsxs)(a.A,{title:e.messages["nav.menuPlan"],children:[(0,w.jsx)(s.A,{xs:1,className:"menu-header-container",children:(0,w.jsx)("h1",{children:e.messages["nav.menuPlan"]})}),(0,w.jsx)(s.A,{xs:1,className:"menu-plan-container",children:(0,w.jsx)($,{})})]})}},5763:(e,t,n)=>{n.d(t,{A:()=>h,J:()=>m});var s=n(5043),i=n(8466),a=n(5901),o=n(568),r=n(579);const l=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],d=["activeKey","getControlledId","getControllerId"],c=["as"];function u(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function m(e){let{active:t,eventKey:n,mountOnEnter:o,transition:r,unmountOnExit:c,role:m="tabpanel",onEnter:p,onEntering:h,onEntered:x,onExit:v,onExiting:b,onExited:f}=e,_=u(e,l);const g=(0,s.useContext)(i.A);if(!g)return[Object.assign({},_,{role:m}),{eventKey:n,isActive:t,mountOnEnter:o,transition:r,unmountOnExit:c,onEnter:p,onEntering:h,onEntered:x,onExit:v,onExiting:b,onExited:f}];const{activeKey:j,getControlledId:E,getControllerId:A}=g,k=u(g,d),C=(0,a.u)(n);return[Object.assign({},_,{role:m,id:E(n),"aria-labelledby":A(n)}),{eventKey:n,isActive:null==t&&null!=C?(0,a.u)(j)===C:t,transition:r||k.transition,mountOnEnter:null!=o?o:k.mountOnEnter,unmountOnExit:null!=c?c:k.unmountOnExit,onEnter:p,onEntering:h,onEntered:x,onExit:v,onExiting:b,onExited:f}]}const p=s.forwardRef(((e,t)=>{let{as:n="div"}=e,s=u(e,c);const[l,{isActive:d,onEnter:p,onEntering:h,onEntered:x,onExit:v,onExiting:b,onExited:f,mountOnEnter:_,unmountOnExit:g,transition:j=o.A}]=m(s);return(0,r.jsx)(i.A.Provider,{value:null,children:(0,r.jsx)(a.A.Provider,{value:null,children:(0,r.jsx)(j,{in:d,onEnter:p,onEntering:h,onEntered:x,onExit:v,onExiting:b,onExited:f,mountOnEnter:_,unmountOnExit:g,children:(0,r.jsx)(n,Object.assign({},l,{ref:t,hidden:!d,"aria-hidden":!d}))})})})}));p.displayName="TabPanel";const h=p},3612:(e,t,n)=>{n.d(t,{A:()=>u});var s=n(5043),i=n(6350),a=n(60),o=n(8466),r=n(5901),l=n(5763),d=n(579);const c=e=>{const{id:t,generateChildId:n,onSelect:l,activeKey:c,defaultActiveKey:u,transition:m,mountOnEnter:p,unmountOnExit:h,children:x}=e,[v,b]=(0,i.iC)(c,u,l),f=(0,a.Cc)(t),_=(0,s.useMemo)((()=>n||((e,t)=>f?`${f}-${t}-${e}`:null)),[f,n]),g=(0,s.useMemo)((()=>({onSelect:b,activeKey:v,transition:m,mountOnEnter:p||!1,unmountOnExit:h||!1,getControlledId:e=>_(e,"tabpane"),getControllerId:e=>_(e,"tab")})),[b,v,m,p,h,_]);return(0,d.jsx)(o.A.Provider,{value:g,children:(0,d.jsx)(r.A.Provider,{value:b||null,children:x})})};c.Panel=l.A;const u=c},5328:(e,t,n)=>{n.d(t,{A:()=>h});var s=n(5173),i=n.n(s),a=(n(5043),n(3612)),o=n(3599),r=n(579);const l=e=>{let{transition:t,...n}=e;return(0,r.jsx)(a.A,{...n,transition:(0,o.A)(t)})};l.displayName="TabContainer";const d=l;var c=n(8325),u=n(6429);const m={eventKey:i().oneOfType([i().string,i().number]),title:i().node.isRequired,disabled:i().bool,tabClassName:i().string,tabAttrs:i().object},p=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};p.propTypes=m;const h=Object.assign(p,{Container:d,Content:c.A,Pane:u.A})},8325:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(5043),i=n(8139),a=n.n(i),o=n(7852),r=n(579);const l=s.forwardRef(((e,t)=>{let{className:n,bsPrefix:s,as:i="div",...l}=e;return s=(0,o.oU)(s,"tab-content"),(0,r.jsx)(i,{ref:t,className:a()(n,s),...l})}));l.displayName="TabContent";const d=l},6429:(e,t,n)=>{n.d(t,{A:()=>h});var s=n(8139),i=n.n(s),a=n(5043),o=n(5901),r=n(8466),l=n(5763),d=n(7852),c=n(8072),u=n(3599),m=n(579);const p=a.forwardRef(((e,t)=>{let{bsPrefix:n,transition:s,...a}=e;const[{className:p,as:h="div",...x},{isActive:v,onEnter:b,onEntering:f,onEntered:_,onExit:g,onExiting:j,onExited:E,mountOnEnter:A,unmountOnExit:k,transition:C=c.A}]=(0,l.J)({...a,transition:(0,u.A)(s)}),w=(0,d.oU)(n,"tab-pane");return(0,m.jsx)(r.A.Provider,{value:null,children:(0,m.jsx)(o.A.Provider,{value:null,children:(0,m.jsx)(C,{in:v,onEnter:b,onEntering:f,onEntered:_,onExit:g,onExiting:j,onExited:E,mountOnEnter:A,unmountOnExit:k,children:(0,m.jsx)(h,{...x,ref:t,className:i()(p,w,v&&"active")})})})})}));p.displayName="TabPane";const h=p},4196:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(8139),i=n.n(s),a=n(5043),o=n(7852),r=n(579);const l=a.forwardRef(((e,t)=>{let{bsPrefix:n,className:s,striped:a,bordered:l,borderless:d,hover:c,size:u,variant:m,responsive:p,...h}=e;const x=(0,o.oU)(n,"table"),v=i()(s,x,m&&`${x}-${m}`,u&&`${x}-${u}`,a&&`${x}-${"string"===typeof a?`striped-${a}`:"striped"}`,l&&`${x}-bordered`,d&&`${x}-borderless`,c&&`${x}-hover`),b=(0,r.jsx)("table",{...h,className:v,ref:t});if(p){let e=`${x}-responsive`;return"string"===typeof p&&(e=`${e}-${p}`),(0,r.jsx)("div",{className:e,children:b})}return b}))},9422:(e,t,n)=>{n.d(t,{A:()=>v});n(5043);var s=n(7121),i=n(3612),a=n(7909),o=n(4541),r=n(4522),l=n(8325),d=n(6429),c=n(2663),u=n(3599),m=n(579);function p(e){let t;return(0,c.jJ)(e,(e=>{null==t&&(t=e.props.eventKey)})),t}function h(e){const{title:t,eventKey:n,disabled:s,tabClassName:i,tabAttrs:a,id:l}=e.props;return null==t?null:(0,m.jsx)(r.A,{as:"li",role:"presentation",children:(0,m.jsx)(o.A,{as:"button",type:"button",eventKey:n,disabled:s,id:l,className:i,...a,children:t})})}const x=e=>{const{id:t,onSelect:n,transition:o,mountOnEnter:r=!1,unmountOnExit:x=!1,variant:v="tabs",children:b,activeKey:f=p(b),..._}=(0,s.Zw)(e,{activeKey:"onSelect"});return(0,m.jsxs)(i.A,{id:t,activeKey:f,onSelect:n,transition:(0,u.A)(o),mountOnEnter:r,unmountOnExit:x,children:[(0,m.jsx)(a.A,{id:t,..._,role:"tablist",as:"ul",variant:v,children:(0,c.Tj)(b,h)}),(0,m.jsx)(l.A,{children:(0,c.Tj)(b,(e=>{const t={...e.props};return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,m.jsx)(d.A,{...t})}))})]})};x.displayName="Tabs";const v=x},3599:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(568),i=n(8072);function a(e){return"boolean"===typeof e?e?i.A:s.A:e}}}]);
//# sourceMappingURL=125.fe714ab1.chunk.js.map