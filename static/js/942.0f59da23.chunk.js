"use strict";(self.webpackChunkownrecipes_web=self.webpackChunkownrecipes_web||[]).push([[942],{2437:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(5043),l=s(4282),r=(s(4589),s(824)),n=s(8563),o=s(579);const a=(0,i.forwardRef)(((e,t)=>{let{id:s,tooltip:i,tooltipPlacement:a,children:c,...d}=e;return(0,o.jsx)(r.A,{condition:Boolean(i),render:e=>(0,o.jsx)(n.A,{id:`${s}-tooltip`,tooltip:i,placement:a,children:e}),children:(0,o.jsx)(l.A,{id:s,"aria-label":i||void 0,"aria-describedby":void 0,...d,ref:t,children:c})})}))},8591:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(5043),l=s(3519),r=s(6971),n=s(8139),o=s.n(n),a=s(7629),c=s(5838),d=s(4949),u=s(579);function m(e){var t,s;const i=e.startsWith(null!==(t=(0,c._$)("PUBLIC_URL"))&&void 0!==t?t:"")?e.substring((null!==(s=(0,c._$)("PUBLIC_URL"))&&void 0!==s?s:"").length):e,l=i.startsWith("/"),r=i.endsWith("/");return i.substring(l?1:0,r?i.length-1:void 0)}const h=e=>{let{title:t,id:s,state:n,className:h,children:g}=e;const p=(0,r.Zp)(),f=(0,r.zy)(),_=null===n||void 0===n?void 0:n.meta.error,y=(0,i.useContext)(a.A);return(0,i.useEffect)((()=>{document.title=(null!=t&&t.length>0?`${t} | `:"")+"OwnRecipes"}),[t]),(0,i.useEffect)((()=>{if(_&&null==s){const e=(0,c.hp)("/NotFound");p(e)}}),[s,_]),(0,u.jsx)(l.A,{id:"main-container",as:"main",className:o()(m(f.pathname),h),style:{marginTop:`${y.toolbarHeight}px`},children:(0,u.jsx)(d.A,{verbose:!0,printStack:!0,children:g})})}},6957:(e,t,s)=>{s.d(t,{A:()=>j});var i=s(7775),l=s(5043),r=s(3626),n=s(97),o=s(3367),a=s(6631),c=s(5544),d=s(8824),u=s(6971);function m(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{navigator:s}=(0,l.useContext)(u.jb);(0,l.useEffect)((()=>{if(!t)return;const i=s.block((t=>{const s={...t,retry(){i(),t.retry()}};e(s)}));return i}),[s,e,t])}((0,l.useCallback)((t=>{window.confirm(e)&&t.retry()}),[e]),t)}var h=s(579);const g=(0,r.YK)({navigation_warning:{id:"navigationprompt.warning",description:"Prompt displayed when navigating on a dirty page (unsaved changes).",defaultMessage:"You have unsaved changed. If you continue, those change may be lost."}}),p=e=>{let{isDirty:t}=e;const{formatMessage:s}=(0,n.A)(),i=(0,l.useMemo)((()=>s(g.navigation_warning)),[s]),r=m(i,t);return(0,h.jsxs)(h.Fragment,{children:[t&&(0,h.jsx)(d.R,{onBeforeunload:()=>i}),r]})};var f=s(2521),_=s(9593);const y=(0,r.YK)({form_errors_title:{id:"status.form_errors_title",description:"Title for the form error box.",defaultMessage:"The form contains an error."},form_errors_alert:{id:"status.form_errors_alert",description:"Alert text for the form error box.",defaultMessage:"Please fix the described error(s) and continue."},form_errors_table_heading_error:{id:"status.form_errors_table_heading_error",description:"The form-errors will be displayed as table, with an error column. This is the column's title.",defaultMessage:"Error"},form_errors_table_heading_message:{id:"status.form_errors_table_heading_message",description:"The form-errors will be displayed as table, with a message column. This is the column's title.",defaultMessage:"Message"},save_success:{id:"status.save_success",description:"Toast for successfully saved form.",defaultMessage:"Changes saved."}});function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\n",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";return e.map((e=>e.trim())).map((e=>e.endsWith(".")||e.endsWith("!")||e.endsWith("?")?e:`${e}${s}`)).join(t)}const v=e=>{var t,s;let{name:i,err:l}=e;const r=(0,n.A)(),c=null!==(t=null===(s=document.querySelector(`[data-api-field="${i}"] > label`))||void 0===s?void 0:s.textContent)&&void 0!==t?t:i,d=o.A(l).map((e=>(0,a.HJ)(r,e)||e.message));return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:c}),(0,h.jsx)("td",{children:b(d)})]})};const x=e=>{let{errors:t}=e;const{formatMessage:s}=(0,n.A)(),i=(0,l.useMemo)((()=>null!=t?function(e){const t=Object.entries(e).filter((e=>{let[t]=e;return!t.startsWith("_")}));return Object.fromEntries(t)}(t):void 0),[t]),r=(0,l.useMemo)((()=>{if(null==i||0===Object.keys(i).length)return[];const e=[];return Object.keys(i).forEach((t=>{const s=i[t];e.push((0,h.jsx)(v,{name:t,err:s},t))})),e}),[i]);if(null==i||0===Object.keys(i).length)return null;const o=(0,h.jsxs)("table",{children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:s(y.form_errors_table_heading_error)}),(0,h.jsx)("th",{children:s(y.form_errors_table_heading_message)})]})}),(0,h.jsx)("tbody",{children:r})]});return(0,h.jsxs)(c.A,{severity:"danger",className:"form-errors",title:s(y.form_errors_title),children:[o,(0,h.jsx)(f.A,{className:"alert-post-message",children:s(y.form_errors_alert)})]})},A=e=>{let{dirty:t,submitting:s,errors:i,onSubmitSuccess:r}=e;const{formatMessage:o}=(0,n.A)(),a=(0,l.useRef)(!1),[c,d]=(0,l.useState)(!1);(0,l.useEffect)((()=>{!0===a.current&&!1===s&&null==i&&(d(!0),null===r||void 0===r||r()),a.current=s}),[s]),(0,l.useEffect)((()=>{t&&c&&d(!1)}),[t]);const u=(0,l.useCallback)((()=>{d(!1)}),[]);return(0,h.jsx)(_.A,{show:c,variant:"success",anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:u,children:o(y.save_success)})},C=e=>{let{dirty:t,submitting:s,errors:i,onSubmitSuccess:l}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(p,{isDirty:t}),(0,h.jsx)(x,{errors:i}),(0,h.jsx)(A,{dirty:t,submitting:s,onSubmitSuccess:l,errors:i})]})},j=e=>{let{onSubmitSuccess:t}=e;return(0,h.jsx)(i.Pc,{subscription:{dirty:!0,submitting:!0,submitErrors:!0},children:e=>{let{dirty:s,submitting:i,submitErrors:l}=e;return(0,h.jsx)(C,{dirty:s,submitting:i,errors:l,onSubmitSuccess:t})}})}},9593:(e,t,s)=>{s.d(t,{A:()=>d});var i=s(5043),l=s(1089),r=s(8139),n=s.n(r),o=s(6308),a=s(579);function c(e){return 0===e.length?"":1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)}const d=(0,i.forwardRef)(((e,t)=>{let{show:s,autoHide:i=6e3,variant:r,anchorOrigin:d,onClose:u,children:m,className:h,...g}=e;const p=null!=d?`Toast-anchorOrigin${c(d.vertical)}${c(d.horizontal)}`:void 0;return(0,a.jsx)(l.A,{show:s,delay:i,autohide:i>0,className:n()("simple-toast",h,p,{success:"success"===r}),onClose:u,...g,ref:t,children:(0,a.jsx)(l.A.Header,{closeButton:null!=u,children:(0,a.jsxs)(a.Fragment,{children:["success"===r&&(0,a.jsx)("div",{className:"toast-icon",children:(0,a.jsx)(o.A,{icon:"check",variant:"light",size:"2x"})}),(0,a.jsx)("span",{className:"toast-title",children:m})]})})})}))},9942:(e,t,s)=>{s.r(t),s.d(t,{default:()=>re});var i=s(5043),l=s(6971),r=s(97),n=s(3626),o=s(7015),a=s(5386),c=s(4136),d=s(1948),u=s(6746),m=s(6847),h=s(9140),g=s(3350),p=s(8999);const f=()=>e=>{e({...(0,a.OS)(g.e,m.h.RESET)})};var _=s(8591),y=s(5838);var b=s(2437),v=s(6308),x=s(9593),A=s(579);const C=(0,n.YK)({clear_completed_tooltip:{id:"grocery_list.footer.clear_completed_tooltip",defaultMessage:"Clear completed"},copy_to_clipboard_tooltip:{id:"grocery_list.footer.copy_to_clipboard_tooltip",defaultMessage:"Copy to clipboard"},copy_to_clipboard_toast:{id:"grocery_list.footer.copy_to_clipboard_toast",defaultMessage:"Copied to clipboard."}}),j=e=>{let{list:t,isNew:s,items:l,onClearCompleted:n,isClearPending:o,onCopyToClipboard:a}=e;const{formatMessage:c}=(0,r.A)(),[d,u]=(0,i.useState)(!1),m=(0,i.useCallback)((()=>{a(),setTimeout((()=>{u(!0)}),0)}),[a]),h=(0,i.useCallback)((()=>{u(!1)}),[]);if(!t||s)return null;const g=null!=(null===l||void 0===l?void 0:l.find((e=>e.completed)));return(0,A.jsxs)("div",{className:"grocery-list-footer print-hidden",children:[null!=l&&l.length>0&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(b.A,{id:"clear-completed",variant:"primary",type:"button",disabled:(0,y.HP)()||!g||o,className:"check",onClick:n,tooltip:c(C.clear_completed_tooltip),children:(0,A.jsx)(v.A,{icon:"check",variant:"light",size:"2x"})}),(0,A.jsx)(b.A,{id:"copy-to-clipboard",variant:"outline-primary",type:"button",onClick:m,tooltip:c(C.copy_to_clipboard_tooltip),children:(0,A.jsx)(v.A,{icon:"clipboard"})})]}),(0,A.jsx)(x.A,{show:d,variant:"success",anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:h,children:c(C.copy_to_clipboard_toast)})]})};var S=s(8139),T=s.n(S),E=s(7775),w=s(3722),N=s(5258),k=s(962),M=s(6957),I=s(5852),L=s(359),O=s(706),U=s(1602),R=s(2521);const $=(0,n.YK)({groceryList_items_summary_empty:{id:"groceryList.items_summary_empty",description:"Summary for grocery list with no items.",defaultMessage:"Empty list"},groceryList_items_summary_completed:{id:"groceryList.items_summary_completed",description:"Number of items, all done.",defaultMessage:"{sum, plural, one {# item} other {# items}}, all done \ud83d\ude00"},groceryList_items_summary_incompleted:{id:"groceryList.items_summary_incompleted",description:"Number of items, with not completed sum.",defaultMessage:"{sum, plural, one {# item} other {# items}}, {sum_not_completed} not completed"},groceryList_filter_by:{id:"groceryList.filter_by",description:"Filter items",defaultMessage:"Show items: {filter}"},filter_off:{id:"groceryList.filter_items.ALL",defaultMessage:"All"},filter_active:{id:"groceryList.filter_items.ACTIVE",defaultMessage:"Not completed"},filter_completed:{id:"groceryList.filter_items.COMPLETED",defaultMessage:"Completed"}}),D=e=>{var t,s,l,n,o;let{list:a,items:c,filter:d,onChangeFilter:u}=e;const m=(0,r.A)(),{formatMessage:h}=m,g=null!==(t=null===c||void 0===c?void 0:c.length)&&void 0!==t?t:0,p=null!==(s=null===c||void 0===c?void 0:c.filter((e=>e.completed)).length)&&void 0!==s?s:0,f=null!==(l=null===c||void 0===c?void 0:c.filter((e=>!e.completed)).length)&&void 0!==l?l:0,_=(0,i.useCallback)(((e,t)=>{d===t?e.preventDefault():u(t)}),[d,u]),b=Object.values(ie).map((e=>(0,A.jsx)(N.A.Item,{active:d===e,onClick:t=>_(t,e),children:(0,y.yW)(m,"groceryList.filter_items.",e)},e)));return(0,A.jsxs)("div",{className:"grocery-list-summary",children:[(0,A.jsxs)(R.A,{className:"summary",children:[0===g&&h($.groceryList_items_summary_empty),g>0&&p===g&&h($.groceryList_items_summary_completed,{sum:null!==(n=null===a||void 0===a?void 0:a.item_count)&&void 0!==n?n:0}),g>0&&f>0&&h($.groceryList_items_summary_incompleted,{sum:null!==(o=null===a||void 0===a?void 0:a.item_count)&&void 0!==o?o:0,sum_not_completed:f})]}),(0,A.jsxs)(N.A,{className:"filter-items-dropdown print-hidden",children:[(0,A.jsx)(N.A.Toggle,{variant:"outline-primary",id:"filter-items-button",disabled:null==a||0===a.item_count,children:h($.groceryList_filter_by,{filter:(0,y.yW)(m,"groceryList.filter_items.",d)})}),(0,A.jsx)(N.A.Menu,{children:b})]})]})},P=(0,n.YK)({new_title_placeholder:{id:"grocery_list.header.title_placeholder",defaultMessage:"(Enter a new title)"},confirm_delete_message:{id:"grocery_list.header.confirm_delete",description:"Are you sure you want to delete this list?",defaultMessage:"Are you sure you want to delete this list?"},edit_list:{id:"grocery_list.header.edit_list_button",defaultMessage:"Edit"},delete_list:{id:"grocery_list.header.delete_list_button",defaultMessage:"Delete"},back_to_lists:{id:"grocery_list.header.back_to_lists",defaultMessage:"To my grocery lists"},save:{id:"grocery_list.header.save_button_tooltip",defaultMessage:"Save"},revert:{id:"grocery_list.header.revert_button_tooltip",defaultMessage:"Revert"}}),K=e=>{let{list:t,isNew:s,onCreate:n,onUpdate:o,onRemove:a,items:c,filter:d,onChangeFilter:u}=e;const m=(0,r.A)(),{formatMessage:h}=m,g=(0,l.zy)(),p=(0,l.Zp)(),f=g.pathname.substring(0,g.pathname.lastIndexOf("/create")),_=(0,i.useRef)(null),x=(0,i.useRef)(null),[C,j]=(0,i.useState)(s),[S,R]=(0,i.useState)(!1),$=(0,i.useCallback)((()=>{R(!0)}),[]),K=(0,i.useCallback)((()=>{a()}),[a]),F=(0,i.useCallback)((()=>{R(!1)}),[]),H=null===t||void 0===t?void 0:t.slug;(0,i.useEffect)((()=>{C!==s&&j(s),S&&R(!1)}),[s,t]);const V=(0,i.useCallback)((()=>{j(!0),null!=x&&null!=x.current&&setTimeout((()=>{x.current.focus()}),1)}),[null===x||void 0===x?void 0:x.current]),z=(0,i.useCallback)((()=>{j(!1)}),[]),X=(0,i.useCallback)((async e=>{if(s){const t={title:e.title};return n(t)}{const t={title:e.title};return o(t)}}),[s,n,o]),B=(0,i.useCallback)((()=>{s&&p(`${f}/${H}`),j(!1),null!=_&&null!=_.current&&setTimeout((()=>{_.current.focus()}),1)}),[s,f,H,null===_||void 0===_?void 0:_.current]),G=(0,i.useMemo)((()=>t?{title:t.title}:{}),[t]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:T()({editing:C,"list-header":!0}),children:[(0,A.jsxs)("div",{className:"grocery-list-title-bar",tabIndex:-1,ref:_,children:[t&&!s&&!C&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(U.A,{id:"to-grocery-lists",variant:"transparent",to:(0,y.hp)("/grocery-lists"),className:"print-hidden",tooltip:h(P.back_to_lists),children:(0,A.jsx)(v.A,{icon:"caret-left"})}),(0,A.jsx)("h1",{children:t.title})]}),C&&(0,A.jsx)(E.lV,{initialValues:G,onSubmit:X,subscription:{},render:e=>{let{form:t,handleSubmit:i}=e;return(0,A.jsxs)(w.A,{onSubmit:i,className:"change-grocery-list-title-form",children:[(0,A.jsx)(M.A,{onSubmitSuccess:B}),(0,A.jsx)(I.A,{form:t,initialValues:G}),(0,A.jsxs)("div",{className:"title-group",children:[(0,A.jsx)(L.A,{name:"title",placeholder:h(P.new_title_placeholder),maxLength:250,ref:x}),(0,A.jsx)(E.Pc,{subscription:{values:!0,submitting:!0},children:e=>{let{values:t,submitting:i}=e;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(b.A,{id:"change-grocery-list-save",type:"submit",variant:"outline-primary",disabled:!t.title||i,tooltip:h(P.save),style:{padding:0},children:(0,A.jsx)(v.A,{icon:"check",variant:"light",size:"2x"})}),!s&&(0,A.jsx)(b.A,{id:"change-grocery-list-revert",type:"button",variant:"outline-secondary",disabled:!t.title||i,onClick:z,tooltip:h(P.revert),style:{padding:0},children:(0,A.jsx)(v.A,{icon:"x",variant:"light",size:"2x"})})]})}})]})]})}}),!C&&(0,A.jsxs)(N.A,{children:[(0,A.jsx)(N.A.Toggle,{id:"grocery-header-option-menu",variant:"transparent",className:"print-hidden",children:(0,A.jsx)(v.A,{icon:"three-dots-vertical",variant:"light"})}),(0,A.jsxs)(N.A.Menu,{id:"grocery-header-option-menu-dropdown",children:[(0,A.jsx)(N.A.Item,{onClick:V,children:h(P.edit_list)}),(0,A.jsx)(N.A.Item,{onClick:$,children:h(P.delete_list)}),(0,A.jsx)(N.A.Divider,{}),(0,A.jsx)(O.A,{to:`${f}/create`,active:!1,children:m.messages["nav.grocery_list_create"]})]})]})]}),!s&&(0,A.jsx)(D,{list:t,items:c,filter:d,onChangeFilter:u})]}),(0,A.jsx)(k.A,{show:S,title:m.messages["recipe.confirm_delete_title"],acceptTitle:m.messages["recipe.confirm_delete_accept"],onAccept:K,onClose:F,acceptButtonProps:{variant:"danger"},children:m.formatMessage(P.confirm_delete_message)})]})};var F=s(8771),H=s(4282),V=s(2085),z=s(6631);const X=(0,n.YK)({new_item_placeholder:{id:"groceryList.items.new_item_placeholder",description:"New item input, placeholder.",defaultMessage:"(New item)"}}),B=e=>{let{onAddItem:t}=e;const s=(0,r.A)(),{formatMessage:l}=s,[n,o]=(0,i.useState)(""),[a,c]=(0,i.useState)(),d=(0,i.useCallback)((async e=>{t({title:e}).then((()=>{o("")})).catch((e=>{c(e)}))}),[t]),u=(0,i.useCallback)((()=>{d(n)}),[d,n]),m=(0,i.useCallback)(((e,t)=>{t!==n&&o(t)}),[n]),h=(0,i.useCallback)((e=>{e.defaultPrevented||e.ctrlKey||e.shiftKey||"Enter"===e.key&&d(e.currentTarget.value)}),[d]);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(V.Ay,{name:"newItem",value:n,placeholder:l(X.new_item_placeholder),errors:(0,z.HJ)(s,null===a||void 0===a?void 0:a.newItem),className:"new-item-input grocery-list-item-margin",onChange:m,onKeyDown:h}),(0,A.jsx)(H.A,{variant:"primary",disabled:0===n.length,onClick:u,className:"grocery-list-item-margin",children:(0,A.jsx)(v.A,{icon:"arrow-right",variant:"light"})})]})};var G=s(1072),J=s(8602);const W=(0,n.YK)({edit_button:{id:"grocery_list.item.edit_button",defaultMessage:"Edit"},delete_button:{id:"grocery_list.item.delete_button",defaultMessage:"Delete"},old_title:{id:"grocery_list.item.old_title_label",defaultMessage:"Item"},new_title:{id:"grocery_list.item.new_title_label",defaultMessage:"New Title"}}),Y=(0,i.forwardRef)(((e,t)=>{let{item:s,onSubmit:l,onSubmitSuccess:n,submitRef:o}=e;const{formatMessage:a}=(0,r.A)(),[c]=(0,i.useState)({oldTitle:s.title,newTitle:s.title}),d=(0,i.useCallback)((async e=>{if(s.title===e.newTitle)return null;const t={title:e.newTitle};return l(t)}),[s.title,l]);return(0,A.jsx)(E.lV,{initialValues:c,onSubmit:d,subscription:{},render:e=>{let{form:s,handleSubmit:i}=e;return(0,A.jsxs)(w.A,{onSubmit:i,ref:t,children:[(0,A.jsx)(M.A,{onSubmitSuccess:n}),(0,A.jsx)(I.A,{form:s,initialValues:c}),(0,A.jsx)(G.A,{children:(0,A.jsx)(J.A,{children:(0,A.jsx)(L.A,{name:"oldTitle",label:a(W.old_title),readOnly:!0})})}),(0,A.jsx)(G.A,{children:(0,A.jsx)(J.A,{children:(0,A.jsx)(L.A,{name:"newTitle",label:a(W.new_title),required:!0,autoFocus:!0})})}),(0,A.jsx)("button",{type:"submit",ref:o,className:"visibility-hidden",children:"Submit"})]})}})})),q=e=>{let{item:t,className:s,onToggle:l,onUpdate:n,onDelete:o}=e;const{formatMessage:a}=(0,r.A)(),[c,d]=(0,i.useState)(!1),u=(0,i.useRef)(null),m=(0,i.useCallback)((()=>{l(t.id,!t.completed)}),[l,t]),h=(0,i.useCallback)((()=>{d(!0)}),[]),g=(0,i.useCallback)((e=>{e||d(!1)}),[]),p=(0,i.useCallback)((()=>{var e;null===(e=u.current)||void 0===e||e.click()}),[u.current]),f=(0,i.useCallback)((async e=>n(t.id,e)),[n,t.id]),_=(0,i.useCallback)((()=>{o(t.id)}),[o,t.id]);return(0,A.jsxs)("div",{className:T()("grocery-list-item",s),children:[(0,A.jsx)(F.A,{name:`${t.listId}-${t.id}-toggle`,label:t.title,value:t.completed,onChange:m,className:"grocery-list-item-cb grocery-list-item-margin"}),(0,A.jsxs)(N.A,{className:"options-dropdown print-hidden",children:[(0,A.jsx)(N.A.Toggle,{variant:"transparent",children:(0,A.jsx)(v.A,{icon:"three-dots-vertical",variant:"light"})}),(0,A.jsxs)(N.A.Menu,{id:"grocery-header-option-menu-dropdown",children:[(0,A.jsx)(N.A.Item,{onClick:h,children:a(W.edit_button)}),(0,A.jsx)(N.A.Item,{onClick:_,children:a(W.delete_button)})]})]}),c&&(0,A.jsx)(k.A,{show:!0,title:a(W.edit_button),onAccept:p,onClose:g,size:"sm",children:(0,A.jsx)(Y,{item:t,onSubmit:f,onSubmitSuccess:g,submitRef:u})})]})},Z=(0,n.YK)({toggle_all:{id:"grocery_list.items.toggle_all",defaultMessage:"Toggle all"},filtered_items_info:{id:"grocery_list.items.filtered_items_info",defaultMessage:"({sum, plural, one {# filtered item} other {# filtered items}})"}});function Q(e,t){switch(t){case ie.ALL:return e;case ie.ACTIVE:return e.filter((e=>!e.completed));case ie.COMPLETED:return e.filter((e=>e.completed));default:return e}}const ee=e=>{let{list:t,isNew:s,items:l,filter:n,onAddItem:o,onToggleItem:a,onToggleItems:c,onUpdateItem:d,onDeleteItem:u}=e;const{formatMessage:m}=(0,r.A)(),h=(0,i.useMemo)((()=>Q(null!==l&&void 0!==l?l:[],n)),[Q,l,n]),g=(0,i.useCallback)((()=>{const e=null==h.find((e=>!e.completed));c(h,!e)}),[c,h]);if(!t||s||null==l)return null;const p=h.map((e=>(0,A.jsx)("li",{children:(0,A.jsx)(q,{item:e,className:"grocery-list-flex-container",onToggle:a,onUpdate:d,onDelete:u})},`${e.listId}-${e.id}`))),f=null!=l.find((e=>!e.completed)),_=l.length-h.length;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(F.A,{name:"toggle-all",label:m(Z.toggle_all),value:null!=l&&l.length>0&&!f,readOnly:null==l||0===h.length,errors:void 0,className:"toggle-all grocery-list-item-margin",onChange:g}),_>0&&(0,A.jsxs)("div",{className:"grocery-list-flex-container",children:[(0,A.jsx)(F.A,{name:"hidden-placeholder-toggle",value:!1,disabled:!0,className:"dummy-checkbox visibility-hidden"}),(0,A.jsx)(R.A,{className:"placeholder grocery-list-item-margin",children:m(Z.filtered_items_info,{sum:_})})]}),(0,A.jsxs)("ul",{className:"grocery-list-items",children:[p,(0,A.jsx)("li",{className:"print-hidden",children:(0,A.jsxs)("div",{className:"grocery-list-flex-container",children:[(0,A.jsx)(F.A,{name:"new-item-toggle",value:!1,disabled:!0,className:"dummy-checkbox visibility-hidden"}),(0,A.jsx)(B,{onAddItem:o})]})})]})]})},te=e=>{let{list:t,isNew:s,onCreate:i,onUpdate:l,onRemove:r,items:n,filter:o,onChangeFilter:a,onAddItem:c,onToggleItem:d,onToggleItems:u,onUpdateItem:m,onDeleteItem:h,isClearPending:g,onClearCompleted:p,onCopyToClipboard:f}=e;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(K,{list:t,isNew:s,onCreate:i,onUpdate:l,onRemove:r,items:n,filter:o,onChangeFilter:a}),(0,A.jsx)(ee,{list:t,isNew:s,items:n,filter:o,onAddItem:c,onToggleItem:d,onToggleItems:u,onUpdateItem:m,onDeleteItem:h}),(0,A.jsx)(j,{list:t,isNew:s,items:n,isClearPending:g,onClearCompleted:p,onCopyToClipboard:f})]})};var se=s(3143);let ie=function(e){return e.ALL="ALL",e.ACTIVE="ACTIVE",e.COMPLETED="COMPLETED",e}({});const le=e=>{let{isNew:t}=e;const s=(0,a.wA)(),r=(0,se.A)(),n=(0,l.Zp)(),o=(0,a.d4)((e=>e.groceryList)),{item:f}=o,_=null===f||void 0===f?void 0:f.slug,b=(0,i.useRef)(),v=(0,a.d4)((e=>e.groceryListItems)),{items:x}=v,C=(0,i.useRef)(),[j,S]=(0,i.useState)(ie.ALL),[T,E]=(0,i.useState)(!1),[w,N]=(0,i.useState)(!1),k=(0,i.useCallback)((async e=>c.vt(s,e)),[]),M=(0,i.useCallback)((async e=>c.yo(s,null!==_&&void 0!==_?_:"",e)),[_]),I=(0,i.useCallback)((()=>{null!=(null===f||void 0===f?void 0:f.id)?(E(!0),s(c.TF(f.id,null!==_&&void 0!==_?_:""))):r("Invalid state: list item may not be null")}),[null===f||void 0===f?void 0:f.id,_]),L=(0,i.useCallback)((()=>{var e;if(null==(null===f||void 0===f?void 0:f.id))return void r("Invalid state: list item may not be null");N(!0);const t=null!==(e=null===x||void 0===x?void 0:x.filter((e=>e.completed)))&&void 0!==e?e:[];(async(e,t,s)=>{const i=s.filter((e=>e.completed)).map((e=>e.id));return(0,d.Ay)().delete(u.U.bulk_list_item).send(i).then((()=>{e({...(0,a.OS)(g.e,g.z.DELETE_COMPLETED_ITEMS),payload:{listId:t,ids:i}})})).catch((t=>(0,h.NC)(e,t,g.e)))})(s,f.id,t).then((()=>{N(!1)}))}),[null===f||void 0===f?void 0:f.id,x]),O=(0,i.useCallback)((async e=>{var t;return(async(e,t,s)=>{e({...(0,a.OS)(p.X0,m.h.CREATE_START)});const i={list:t,...s};return(0,d.Ay)().post(u.U.list_item).send(i).then((s=>{const i=(0,p.cJ)(t,s.body);e({...(0,a.OS)(p.X0,m.h.CREATE_SUCCESS),payload:i})})).catch((t=>(0,h.NC)(e,t,p.X0)))})(s,null!==(t=null===f||void 0===f?void 0:f.id)&&void 0!==t?t:0,e)}),[null===f||void 0===f?void 0:f.id]),U=(0,i.useCallback)(((e,t)=>{null!=(null===f||void 0===f?void 0:f.id)?s(((e,t,s)=>i=>{i({...(0,a.OS)(p.X0,m.h.UPDATE_START)}),(0,d.Ay)().patch(`${u.U.list_item}${t}/`).send({completed:s}).then((()=>{i({...(0,a.OS)(p.X0,p.cg.TOGGLE_ITEM),payload:{listId:e,id:t}})})).catch((e=>i((0,h.H4)(e,p.X0))))})(f.id,e,t)):r("Invalid state: list item may not be null")}),[null===f||void 0===f?void 0:f.id]),R=(0,i.useCallback)(((e,t)=>{null!=(null===f||void 0===f?void 0:f.id)&&null!=x?s(((e,t,s)=>e=>{e({...(0,a.OS)(g.e,m.h.GET_START)});const i=t.filter((e=>e.completed!==s)).map((e=>({id:e.id,completed:s})));(0,d.Ay)().patch(u.U.bulk_list_item).send(i).then((()=>{e({...(0,a.OS)(g.e,g.z.TOGGLE_ITEMS),payload:i})})).catch((t=>e((0,h.H4)(t,g.e))))})(f.id,e,t)):r("Invalid state: list item may not be null")}),[null===f||void 0===f?void 0:f.id,x]),$=(0,i.useCallback)((async(e,t)=>{if(null!=(null===f||void 0===f?void 0:f.id))return(async(e,t,s,i)=>(e({...(0,a.OS)(p.X0,m.h.UPDATE_START)}),(0,d.Ay)().patch(`${u.U.list_item}${s}/`).send(i).then((s=>{const i=(0,p.cJ)(t,s.body);e({...(0,a.OS)(p.X0,m.h.UPDATE_SUCCESS),payload:i})})).catch((t=>(0,h.NC)(e,t,p.X0)))))(s,f.id,e,t);r("Invalid state: list item may not be null")}),[null===f||void 0===f?void 0:f.id]),D=(0,i.useCallback)((e=>{var t,i;null!=f?s((t=f.id,i=e,e=>{e({...(0,a.OS)(p.X0,m.h.DELETE_START)}),(0,d.Ay)().delete(`${u.U.list_item}${i}/`).then((()=>{e({...(0,a.OS)(p.X0,m.h.DELETE_SUCCESS),payload:{listId:t,id:i}})})).catch((t=>e((0,h.H4)(t,p.X0))))})):r("Invalid state: list item may not be null")}),[f]);(0,i.useEffect)((()=>{null==b.current?b.current=f:T&&null!=b.current&&null==f&&n((0,y.hp)("/grocery-lists"))}),[f]),(0,i.useEffect)((()=>{null==C.current?C.current=x:w&&N(!1)}),[x]);const P=(0,i.useCallback)((()=>{if(null==f)return void r("Invalid state: list item may not be null");const e=function(e,t){return`${e.title}:\n${t.map((e=>`${e.completed?"[x]":"[ ]"} ${e.title}`)).join("\n")}`}(f,null!==x&&void 0!==x?x:[]);(0,y.lW)(e)}),[f,x]);return(0,A.jsx)(te,{list:f,isNew:t,onCreate:k,onUpdate:M,onRemove:I,items:x,filter:j,onChangeFilter:S,onAddItem:O,onToggleItem:U,onToggleItems:R,onUpdateItem:$,onDeleteItem:D,isClearPending:w,onClearCompleted:L,onCopyToClipboard:P})},re=()=>{var e,t;const{formatMessage:s}=(0,r.A)(),b=(0,n.YK)({new_grocery_list:{id:"grocery_list.new_grocery_list",description:"New GroceryList documentTitle",defaultMessage:"New grocery list"}}),v=(0,l.g)(),x=(0,l.Zp)(),C=(0,a.wA)(),j=(0,a.d4)((e=>e.groceryList)),S=j.meta,T=(0,a.d4)((e=>e.groceryListItems)).meta,E=v.list,w="create"===E;return(0,i.useEffect)((()=>{E&&(window.scrollTo(0,0),w?(C(c.cL()),C(f())):C(c.Hh(E)))}),[E]),(0,i.useEffect)((()=>{var e,t;null!==(e=j.item)&&void 0!==e&&e.id&&!w&&C((t=j.item.id,e=>{e({...(0,a.OS)(g.e,m.h.GET_START)}),(0,d.Ay)().get(`${u.U.list_item}?list=${t}`).then((s=>{e({...(0,a.OS)(g.e,m.h.GET_SUCCESS),payload:s.body.results.map((e=>(0,p.cJ)(t,e)))})})).catch((t=>e((0,h.H4)(t,g.e))))}))}),[null===(e=j.item)||void 0===e?void 0:e.id,w]),(0,i.useEffect)((()=>{404===o.A(S.error,"status")&&x((0,y.sF)("/grocery-lists"))}),[S.error]),(0,i.useEffect)((()=>{404===o.A(T.error,"status")&&x((0,y.sF)("/grocery-lists"))}),[T.error]),(0,i.useEffect)((()=>()=>{C(c.cL()),C(f())}),[]),(0,A.jsx)(_.A,{title:w?s(b.new_grocery_list):null===(t=j.item)||void 0===t?void 0:t.title,className:"optiwidth",children:(0,A.jsx)(le,{isNew:w})})}},4136:(e,t,s)=>{s.d(t,{Hh:()=>d,TF:()=>h,cL:()=>f,uq:()=>p,vt:()=>u,yo:()=>m});var i=s(1948),l=s(6746),r=s(5386),n=s(6847),o=s(9140),a=s(4962),c=s(8999);const d=e=>t=>{t({...(0,r.OS)(a.bK,n.h.GET_START)}),(0,i.Ay)().get(`${l.U.list}${e}/`).then((e=>{var s;t((s=(0,a.VJ)(e.body),{...(0,r.OS)(a.bK,n.h.GET_SUCCESS),payload:s}))})).catch((e=>t((0,o.H4)(e,a.bK))))},u=async(e,t)=>(e({...(0,r.OS)(a.bK,n.h.CREATE_START)}),(0,i.Ay)().post(l.U.list).send(t).then((t=>{const s=(0,a.VJ)(t.body);e({...(0,r.OS)(a.bK,n.h.CREATE_SUCCESS),payload:s})})).catch((t=>(0,o.NC)(e,t,a.bK)))),m=async(e,t,s)=>(e({...(0,r.OS)(a.bK,n.h.UPDATE_START)}),(0,i.Ay)().patch(`${l.U.list}${t}/`).send(s).then((t=>{const s=(0,a.VJ)(t.body);e({...(0,r.OS)(a.bK,n.h.UPDATE_SUCCESS),payload:s})})).catch((t=>(0,o.NC)(e,t,a.bK)))),h=(e,t)=>s=>{s({...(0,r.OS)(a.bK,n.h.DELETE_START)}),(0,i.Ay)().delete(`${l.U.list}${t}/`).then((()=>{s({...(0,r.OS)(a.bK,n.h.DELETE_SUCCESS),payload:{id:e}})})).catch((e=>s((0,o.H4)(e,a.bK))))};function g(e,t){return[e.quantity&&"0"!==e.quantity?e.quantity:void 0,t(e.measurement,e.quantity),e.title].filter(Boolean).join(" ")}const p=async(e,t,s,d)=>{const u=s.ingredientGroups.flatMap((e=>e.ingredients.map((e=>({list:t,title:g(e,d)}))))),m=s.subrecipes.map((e=>({list:t,title:g(e,d)}))),h=u.concat(m);return h.length>0?(e({...(0,r.OS)(a.bK,n.h.UPDATE_START)}),(0,i.Ay)().post(l.U.bulk_list_item).send(h).then((s=>{e({...(0,r.OS)(a.bK,a.Jb.BULK_ADD),payload:s.body.map((e=>(0,c.cJ)(t,e)))}),e({...(0,r.OS)(a.bK,n.h.UPDATE_SUCCESS)})})).catch((t=>e((0,o.H4)(t,a.bK))))):null},f=()=>e=>{e({...(0,r.OS)(a.bK,n.h.RESET)})}},1072:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(8139),l=s.n(i),r=s(5043),n=s(7852),o=s(579);const a=r.forwardRef(((e,t)=>{let{bsPrefix:s,className:i,as:r="div",...a}=e;const c=(0,n.oU)(s,"row"),d=(0,n.gy)(),u=(0,n.Jm)(),m=`${c}-cols`,h=[];return d.forEach((e=>{const t=a[e];let s;delete a[e],null!=t&&"object"===typeof t?({cols:s}=t):s=t;const i=e!==u?`-${e}`:"";null!=s&&h.push(`${m}${i}-${s}`)})),(0,o.jsx)(r,{ref:t,...a,className:l()(i,c,...h)})}));a.displayName="Row";const c=a},1089:(e,t,s)=>{s.d(t,{A:()=>A});var i=s(5043),l=s(8139),r=s.n(l),n=s(3240),o=s(6555),a=s(8072),c=s(579);const d={[o.ns]:"showing",[o.ze]:"showing show"},u=i.forwardRef(((e,t)=>(0,c.jsx)(a.A,{...e,ref:t,transitionClasses:d})));u.displayName="ToastFade";const m=u;var h=s(1456),g=s(7852),p=s(5632);const f=i.createContext({onClose(){}}),_=i.forwardRef(((e,t)=>{let{bsPrefix:s,closeLabel:l="Close",closeVariant:n,closeButton:o=!0,className:a,children:d,...u}=e;s=(0,g.oU)(s,"toast-header");const m=(0,i.useContext)(f),_=(0,h.A)((e=>{null==m||null==m.onClose||m.onClose(e)}));return(0,c.jsxs)("div",{ref:t,...u,className:r()(s,a),children:[d,o&&(0,c.jsx)(p.A,{"aria-label":l,variant:n,onClick:_,"data-dismiss":"toast"})]})}));_.displayName="ToastHeader";const y=_,b=i.forwardRef(((e,t)=>{let{className:s,bsPrefix:i,as:l="div",...n}=e;return i=(0,g.oU)(i,"toast-body"),(0,c.jsx)(l,{ref:t,className:r()(s,i),...n})}));b.displayName="ToastBody";const v=b,x=i.forwardRef(((e,t)=>{let{bsPrefix:s,className:l,transition:o=m,show:a=!0,animation:d=!0,delay:u=5e3,autohide:h=!1,onClose:p,onEntered:_,onExit:y,onExiting:b,onEnter:v,onEntering:x,onExited:A,bg:C,...j}=e;s=(0,g.oU)(s,"toast");const S=(0,i.useRef)(u),T=(0,i.useRef)(p);(0,i.useEffect)((()=>{S.current=u,T.current=p}),[u,p]);const E=(0,n.A)(),w=!(!h||!a),N=(0,i.useCallback)((()=>{w&&(null==T.current||T.current())}),[w]);(0,i.useEffect)((()=>{E.set(N,S.current)}),[E,N]);const k=(0,i.useMemo)((()=>({onClose:p})),[p]),M=!(!o||!d),I=(0,c.jsx)("div",{...j,ref:t,className:r()(s,l,C&&`bg-${C}`,!M&&(a?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,c.jsx)(f.Provider,{value:k,children:M&&o?(0,c.jsx)(o,{in:a,onEnter:v,onEntering:x,onEntered:_,onExit:y,onExiting:b,onExited:A,unmountOnExit:!0,children:I}):I})}));x.displayName="Toast";const A=Object.assign(x,{Body:v,Header:y})}}]);
//# sourceMappingURL=942.0f59da23.chunk.js.map