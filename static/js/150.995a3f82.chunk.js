"use strict";(self.webpackChunkownrecipes_web=self.webpackChunkownrecipes_web||[]).push([[150],{9377:function(n,e,t){var i=t(885),r=t(2791),s=t(184);e.Z=function(n){var e=n.src,t=n.placeholder,c=n.alt,u=n.onError,o=n.style,a=n.className,l=(0,r.useState)(!1),d=(0,i.Z)(l,2),f=d[0],h=d[1];(0,r.useEffect)((function(){h(!1)}),[e]);return(0,s.jsx)("img",{src:f?t:e,alt:c,onError:function(){h(!0),u&&u()},style:o,className:a})}},3976:function(n,e,t){var i=t(2791),r=t(7022),s=t(6871),c=t(5694),u=t(1884),o=t(2605),a=t(184);function l(n){var e,t,i=n.startsWith(null!==(e=(0,u.dU)("PUBLIC_URL"))&&void 0!==e?e:"")?n.substring((null!==(t=(0,u.dU)("PUBLIC_URL"))&&void 0!==t?t:"").length):n,r=i.startsWith("/"),s=i.endsWith("/");return i.substring(r?1:0,s?i.length-1:void 0)}e.Z=function(n){var e=n.title,t=n.id,d=n.state,f=n.children,h=(0,s.s0)(),g=(0,s.TH)(),v=null===d||void 0===d?void 0:d.meta.error,p=(0,i.useContext)(c.Z);return(0,i.useEffect)((function(){document.title="".concat(null!=e&&e.length>0?"".concat(e," | "):"","OwnRecipes")}),[e]),(0,i.useEffect)((function(){if(v&&null==t){var n=(0,u.qC)("/NotFound");h(n)}}),[t,v]),(0,a.jsx)(r.Z,{className:l(g.pathname),style:{marginTop:"".concat(p.toolbarHeight,"px")},children:(0,a.jsx)(o.Z,{verbose:!0,printStack:!0,children:f})})}},2265:function(n,e,t){t.d(e,{Z:function(){return b}});var i=t(3720),r=t(885),s=t(2791),c=t(6221),u=t(3539),o=t(3204),a=t(3522),l=t(1413),d=t(6871);function f(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(0,s.useContext)(d.Us),i=t.navigator;(0,s.useEffect)((function(){if(e){var t=i.block((function(e){var i=(0,l.Z)((0,l.Z)({},e),{},{retry:function(){t(),e.retry()}});n(i)}));return t}}),[i,n,e])}var h=t(184),g=function(n){var e=n.isDirty,t=(0,u.Z)().formatMessage,i=(0,c.vU)({navigation_warning:{id:"navigationprompt.warning",description:"Prompt displayed when navigating on a dirty page (unsaved changes).",defaultMessage:"You have unsaved changed. If you continue, those change may be lost."}}),r=(0,s.useMemo)((function(){return t(i.navigation_warning)}),[t]),o=function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f((0,s.useCallback)((function(e){window.confirm(n)&&e.retry()}),[n]),e)}(r,e);return(0,h.jsxs)(h.Fragment,{children:[e&&(0,h.jsx)(a.S,{onBeforeunload:function(){return r}}),o]})},v=t(3847);var p=function(n){var e=n.errors,t=(0,u.Z)().formatMessage,i=(0,c.vU)({form_errors_title:{id:"status.form_errors_title",description:"Title for the form error box.",defaultMessage:"The form contains an error."},form_errors_alert:{id:"status.form_errors_alert",description:"Alert text for the form error box.",defaultMessage:"Please fix the error(s)."}});if(!e||0===Object.keys(e).length)return null;var a=(0,s.useMemo)((function(){return function(n){var e=Object.entries(n).filter((function(n){return!(0,r.Z)(n,1)[0].startsWith("_")}));return Object.fromEntries(e)}(e)}),[e]);return 0===Object.keys(a).length?null:(0,h.jsx)(o.Z,{severity:"danger",className:"form-errors",title:t(i.form_errors_title),children:JSON.stringify(a)})},m=function(n){var e=n.dirty,t=n.submitting,i=n.errors,o=n.onSubmitSuccess,a=(0,u.Z)().formatMessage,l=(0,c.vU)({save_success:{id:"status.save_success",description:"Toast for successfully saved form.",defaultMessage:"Changes saved."}}),d=(0,s.useRef)(!1),f=(0,s.useState)(!1),g=(0,r.Z)(f,2),p=g[0],m=g[1];(0,s.useEffect)((function(){!0===d.current&&!1===t&&null==i&&(m(!0),null===o||void 0===o||o()),d.current=t}),[t]),(0,s.useEffect)((function(){e&&p&&m(!1)}),[e]);return(0,h.jsx)(v.Z,{show:p,variant:"success",anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:function(){m(!1)},children:a(l.save_success)})},y=function(n){var e=n.dirty,t=n.submitting,i=n.errors,r=n.onSubmitSuccess;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(g,{isDirty:e}),(0,h.jsx)(p,{errors:i}),(0,h.jsx)(m,{dirty:e,submitting:t,onSubmitSuccess:r,errors:i})]})},b=function(n){var e=n.onSubmitSuccess;return(0,h.jsx)(i.lP,{subscription:{dirty:!0,submitting:!0,submitErrors:!0},children:function(n){var t=n.dirty,i=n.submitting,r=n.submitErrors;return(0,h.jsx)(y,{dirty:t,submitting:i,errors:r,onSubmitSuccess:e})}})}},9854:function(n,e,t){var i=t(2791);e.Z=function(n){var e=n.form,t=n.initialValues;return(0,i.useEffect)((function(){e&&null!=e.restart&&e.restart(t)}),[t]),null}},3847:function(n,e,t){t.d(e,{Z:function(){return a}});var i=t(6657),r=t(1694),s=t.n(r),c=t(78),u=t(184);function o(n){return 0===n.length?"":1===n.length?n.toUpperCase():n.charAt(0).toUpperCase()+n.slice(1)}var a=function(n){var e=n.show,t=n.autoHide,r=n.variant,a=n.anchorOrigin,l=n.onClose,d=n.className,f=n.children,h=null!==t&&void 0!==t?t:6e3,g=null!=a?"Toast-anchorOrigin".concat(o(a.vertical)).concat(o(a.horizontal)):void 0;return(0,u.jsx)(i.Z,{show:e,delay:h,autohide:h>0,className:s()("simple-toast",d,g,{success:"success"===r}),onClose:function(){null===l||void 0===l||l()},children:(0,u.jsx)(i.Z.Header,{closeButton:null!=l,children:(0,u.jsxs)(u.Fragment,{children:["success"===r&&(0,u.jsx)("div",{className:"toast-icon",children:(0,u.jsx)(c.Z,{icon:"check",variant:"light",size:"2x"})}),(0,u.jsx)("span",{className:"toast-title",children:f})]})})})}},6956:function(n,e,t){t.d(e,{Z:function(){return c}});var i=t(1694),r=t.n(i),s=t(184),c=function(n){var e=n.height,t=n.width,i=n.className,c=n.children;return(0,s.jsx)("div",{style:{paddingTop:"".concat(e,"%"),width:"".concat(t,"%"),position:"relative"},className:r()("width-height-ratio",i),children:c})}},9024:function(n,e,t){var i=t(2982),r=t(2791),s=t(1694),c=t.n(s),u=(t(4786),t(243)),o=t(184);function a(n,e,t,i){if(0!==t.length){var r=function(n,e){var t=e.findIndex((function(e){return e.title===n}));if(t>=0)return e.splice(t,1)[0]}(e,i);n.push({heading:e,directions:t,ingredients:r?[r]:void 0})}}function l(n,e){var t=(0,i.Z)(e),r=n.includes("\n"),s=[],c=[],u="";return r?(n.split("\n").filter((function(n){return n.length>0})).forEach((function(n){n.endsWith(":")?(a(s,u,c,t),u=n.substring(0,n.length-1),c=[]):c.push(n)})),a(s,u,c,t)):a(s,"",[n],t),function(n,e){if(0!==e.length){var t,r=n.find((function(n){return!n.heading}));r?r.ingredients?(t=r.ingredients).push.apply(t,(0,i.Z)(e)):r.ingredients=(0,i.Z)(e):n.unshift({directions:[],ingredients:(0,i.Z)(e)}),e.splice(0,e.length)}}(s,t),s}e.Z=function(n){var e=n.directions,t=n.ingredients,i=(0,r.useMemo)((function(){return l(e,t)}),[e,t]),s=(0,r.useMemo)((function(){return(n=i).filter((function(n){return n.directions.length>0||null!=n.ingredients&&n.ingredients.length>0})).map((function(e){var t,i;1===e.directions.length?i=(0,o.jsx)("div",{className:"direction",children:e.directions[0]}):e.directions.length>1&&(i=(0,o.jsx)("ol",{className:"directions",children:e.directions.map((function(n){return(0,o.jsx)("li",{className:"direction",children:n},n)}))}));var r=!e.heading;return(0,o.jsxs)("div",{className:c()("subgroup",e.heading||"default-group"),children:[e.heading&&(0,o.jsxs)("h3",{children:[e.heading,":"]}),e.ingredients&&e.ingredients.length>0&&(0,o.jsx)("div",{className:"ingredients",children:(0,o.jsx)(u.Z,{groups:e.ingredients,hasSubrecipes:r&&n.length>1})}),i]},null!==(t=e.heading)&&void 0!==t?t:"")}));var n}),[i]);return(0,o.jsx)(o.Fragment,{children:s})}},243:function(n,e,t){t.d(e,{Z:function(){return d}});t(1420);var i=t(2791),r=t(2591),s=t(6221),c=t(3539),u=t(7847),o=t(1884),a=t(184);var l=function(n){var e=n.caption,t=n.data,l=(0,c.Z)(),d=(0,s.vU)({quantity:{id:"ingredients.table.quantity",description:"Ingredients table quantity header",defaultMessage:"Quantity"},ingredient:{id:"ingredients.table.ingredient",description:"Ingredients table ingredient header",defaultMessage:"Ingredient"}}),f=(0,i.useContext)(u.Z),h=t.map((function(n,e){var t,i=n.quantity,r=function(n,e,t,i){var r;if(null!=e){var s=n.formatter[n.parser[e]];r=null!=s?(0,o.kT)(t,"measurement.",s,{itemCount:i}):e}else r="";return r}(f,n.measurement,l,n.quantity),s=n.title,c=Boolean(i)||Boolean(r);return(0,a.jsxs)("tr",{className:"ingredient",children:[(0,a.jsx)("td",{className:"quantity",children:c&&(0,a.jsxs)("span",{children:[i,null!=i&&i.length>0&&r.length>0&&" ",r]})}),(0,a.jsx)("td",{className:"ingredient",children:(0,a.jsx)("span",{children:s})})]},String(null!==(t=n.id)&&void 0!==t?t:e))}));return(0,a.jsxs)(r.Z,{striped:!0,size:"sm",className:"table ingredients-table",children:[e&&(0,a.jsxs)("caption",{className:"subheading h3",children:[e,":"]}),(0,a.jsx)("thead",{className:"hideme",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:(0,a.jsx)("span",{children:l.formatMessage(d.quantity)})}),(0,a.jsx)("th",{children:(0,a.jsx)("span",{children:l.formatMessage(d.ingredient)})})]})}),(0,a.jsx)("tbody",{children:h})]})},d=function(n){var e=n.groups,t=n.hasSubrecipes||null!=e&&e.length>1,i=null===e||void 0===e?void 0:e.filter((function(n){return n.title||n.ingredients.length>0})).map((function(n){return(0,a.jsx)("div",{className:"subgroup ingredient-group",children:(0,a.jsx)(l,{caption:t&&n.title?n.title:void 0,data:n.ingredients})},n.title)}));return(0,a.jsx)(a.Fragment,{children:i})}},4349:function(n,e,t){var i=t(1694),r=t.n(i),s=t(2591),c=t(3539),u=t(6221),o=t(3504),a=t(1884),l=t(184);e.Z=function(n){var e=n.subRecipes,t=(0,c.Z)(),i=(0,u.vU)({subrecipes:{id:"subrecipes.subrecipes heading",description:"Subrecipes header",defaultMessage:"Subrecipes"},quantity:{id:"subrecipes.table.quantity",description:"Subrecipes table quantity header",defaultMessage:"Quantity"},subrecipe:{id:"subrecipes.table.subrecipe",description:"Subrecipes table ingredient header",defaultMessage:"Subrecipe"}}),d=null==e||e.filter((function(n){return null!=n.quantity&&n.quantity.length>0&&"0"!==n.quantity||null!=n.measurement&&n.measurement.length>0})).length>0,f=null===e||void 0===e?void 0:e.map((function(n,e){var i,s=null!=n.quantity&&n.quantity.length>0&&"0"!==n.quantity?n.quantity:"",c=null!=n.measurement?(0,a.kT)(t,"measurement.",n.measurement,{itemCount:n.quantity}):"",u=n.title;return(0,l.jsxs)("tr",{className:"ingredient",children:[d&&(0,l.jsx)("td",{className:"quantity first-col",children:(0,l.jsxs)("span",{children:[s,null!=s&&s.length>0&&c.length>0&&" ",c]})}),(0,l.jsx)("td",{className:r()("ingredient last-col",{"first-col":d}),children:(0,l.jsx)("span",{children:(0,l.jsx)(o.rU,{to:(0,a.qC)("/recipe/".concat(n.slug)),className:"title",children:u})})})]},String(null!==(i=n.child_recipe_id)&&void 0!==i?i:e))}));return null==f||0===f.length?null:(0,l.jsx)("div",{className:"subgroup ingredient-group",children:(0,l.jsxs)(s.Z,{striped:!0,size:"sm",className:"table ingredients-table",children:[(0,l.jsxs)("caption",{className:"subheading h3",children:[t.formatMessage(i.subrecipes),":"]}),(0,l.jsx)("thead",{className:"hideme",children:(0,l.jsxs)("tr",{children:[d&&(0,l.jsx)("th",{children:(0,l.jsx)("span",{children:t.formatMessage(i.quantity)})}),(0,l.jsx)("th",{children:(0,l.jsx)("span",{children:t.formatMessage(i.subrecipe)})})]})}),(0,l.jsx)("tbody",{children:f})]})})}},297:function(n,e,t){t.d(e,{MA:function(){return h},eI:function(){return d},ln:function(){return f},mc:function(){return g},y7:function(){return a},zD:function(){return l}});var i=t(1413),r=t(7572),s=t(8263),c=t(1818),u=t(7728),o=t(9656),a=function(n){return(0,i.Z)((0,i.Z)({},(0,o.s_)(c.yW,u.o.GET_SUCCESS)),{},{payload:n})},l=function(n){return function(e){e((0,i.Z)({},(0,o.s_)(c.yW,u.o.GET_START))),(0,r.WY)().get("".concat(s.m.recipe).concat(n,"/")).then((function(n){e(a((0,c.gl)(n.body)))})).catch((function(n){return e((0,r.S3)(n,c.yW))}))}},d=function(n){return function(e){e((0,i.Z)({},(0,o.s_)(c.yW,u.o.DELETE_START))),(0,r.WY)().delete("".concat(s.m.recipe).concat(n,"/")).then((function(){e((0,i.Z)((0,i.Z)({},(0,o.s_)(c.yW,c.M9.RECIPE_DELETE)),{},{payload:{slug:n}}))})).catch((function(n){return e((0,r.S3)(n,c.yW))}))}},f=function(n,e){return function(t){t((0,i.Z)((0,i.Z)({},(0,o.s_)(c.yW,c.M9.RECIPE_INGREDIENT_SERVINGS_UPDATE)),{},{payload:{recipeSlug:n,customServings:e}}))}},h=function(n){return function(e){e((0,i.Z)((0,i.Z)({},(0,o.s_)(c.yW,u.o.PRELOAD)),{},{payload:n}))}},g=function(){return function(n){n((0,i.Z)({},(0,o.s_)(c.yW,u.o.RESET)))}}},5208:function(n,e,t){t.r(e),t.d(e,{fetchRecipeList:function(){return b},invalidateCreatableLists:function(){return y},load:function(){return g},preload:function(){return v},reset:function(){return p},save:function(){return m}});var i=t(4165),r=t(5861),s=t(1413),c=t(7572),u=t(8263),o=t(7728),a=t(1818),l=t(1220),d=t(9656),f=t(2020),h=t(297),g=function(n){return function(e){e((0,s.Z)({},(0,d.s_)(f.z,o.o.GET_START))),(0,c.WY)().get("".concat(u.m.recipe).concat(n,"/")).then((function(n){var t=(0,a.gl)(n.body);e((0,s.Z)((0,s.Z)({},(0,d.s_)(f.z,o.o.GET_SUCCESS)),{},{payload:t})),e((0,h.y7)(t))})).catch((function(n){return e((0,c.S3)(n,f.z))}))}},v=function(n){return function(e){e((0,s.Z)((0,s.Z)({},(0,d.s_)(f.z,o.o.PRELOAD)),{},{payload:n}))}},p=function(){return function(n){n((0,s.Z)({},(0,d.s_)(f.z,o.o.RESET)))}},m=function(){var n=(0,r.Z)((0,i.Z)().mark((function n(e,t){var r,l,g,v;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r="object"===typeof t.photo?t.photo:void 0,l=!t.id,g=l?(0,c.WY)().post(u.m.recipe):(0,c.WY)().patch("".concat(u.m.recipe).concat(t.slug,"/")),e((0,s.Z)({},(0,d.s_)(f.z,l?o.o.CREATE_START:o.o.UPDATE_START))),v=(0,a.cH)(t),n.abrupt("return",g.send(v).then((function(n){if(r)return(0,c.WY)().patch("".concat(u.m.recipe).concat(n.body.slug,"/")).attach("photo",r).then((function(n){var i=(0,a.gl)(n.body);e((0,s.Z)((0,s.Z)({},(0,d.s_)(f.z,l?o.o.CREATE_SUCCESS:o.o.UPDATE_SUCCESS)),{},{oldId:t.id,payload:i})),e((0,h.y7)(i))})).catch((function(n){return(0,c.Hn)(e,n,f.z)}));var i=(0,a.gl)(n.body);return e((0,s.Z)((0,s.Z)({},(0,d.s_)(f.z,l?o.o.CREATE_SUCCESS:o.o.UPDATE_SUCCESS)),{},{oldId:l?null:t.id,payload:i})),e((0,h.y7)(i)),e(y(t,(0,a.gl)(n.body))),null})).catch((function(n){return(0,c.Hn)(e,n,f.z)})));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),y=function(n,e){return function(t){var i,r,c,u,a,f;(null===(i=n.course)||void 0===i?void 0:i.id)!==(null===(r=e.course)||void 0===r?void 0:r.id)&&t((0,s.Z)({},(0,d.s_)(l.pq,o.o.RESET))),(null===(c=n.cuisine)||void 0===c?void 0:c.id)!==(null===(u=e.cuisine)||void 0===u?void 0:u.id)&&t((0,s.Z)({},(0,d.s_)(l.xv,o.o.RESET))),(null===(a=n.tags)||void 0===a?void 0:a.map((function(n){return n.id})).join("/"))!==(null===(f=e.tags)||void 0===f?void 0:f.map((function(n){return n.id})).join("/"))&&t((0,s.Z)({},(0,d.s_)(l.ic,o.o.RESET)))}},b=function(n){return(0,c.WY)().get("".concat(u.m.recipe,"?fields=id,title,slug&limit=5&search=").concat(n)).then((function(n){return n.body.results.map((function(n){return{key:n.slug,name:n.slug,char:n.title}}))})).catch((function(){return[]}))}},4786:function(){},1420:function(){},3541:function(){}}]);
//# sourceMappingURL=150.995a3f82.chunk.js.map