"use strict";(self.webpackChunkownrecipes_web=self.webpackChunkownrecipes_web||[]).push([[856],{4712:(e,t,s)=>{s.d(t,{c:()=>a});var i=s(9060),l=s(2136),n=(s(7272),s(4748)),r=s(6240),o=s(2496);const a=(0,i.forwardRef)(((e,t)=>{let{id:s,tooltip:i,tooltipPlacement:a,children:c,...d}=e;return(0,o.jsx)(n.c,{condition:Boolean(i),render:e=>(0,o.jsx)(r.c,{id:"".concat(s,"-tooltip"),tooltip:i,placement:a,children:e}),children:(0,o.jsx)(l.c,{id:s,"aria-label":i||void 0,"aria-describedby":void 0,...d,ref:t,children:c})})}))},7173:(e,t,s)=>{s.d(t,{c:()=>u});var i=s(9060),l=s(544),n=s(6936),r=s(9352),o=s(8330),a=s(8684),c=s(2496);function d(e){var t,s;const i=e.startsWith(null!==(t=(0,o.W4)("PUBLIC_URL"))&&void 0!==t?t:"")?e.substring((null!==(s=(0,o.W4)("PUBLIC_URL"))&&void 0!==s?s:"").length):e,l=i.startsWith("/"),n=i.endsWith("/");return i.substring(l?1:0,n?i.length-1:void 0)}const u=e=>{let{title:t,id:s,state:u,children:m}=e;const g=(0,n.i6)(),h=(0,n.IT)(),p=null===u||void 0===u?void 0:u.meta.error,f=(0,i.useContext)(r.c);return(0,i.useEffect)((()=>{document.title="".concat(null!=t&&t.length>0?"".concat(t," | "):"","OwnRecipes")}),[t]),(0,i.useEffect)((()=>{if(p&&null==s){const e=(0,o.sL)("/NotFound");g(e)}}),[s,p]),(0,c.jsx)(l.c,{id:"main-container",as:"main",className:d(h.pathname),style:{marginTop:"".concat(f.toolbarHeight,"px")},children:(0,c.jsx)(a.c,{verbose:!0,printStack:!0,children:m})})}},7136:(e,t,s)=>{s.d(t,{c:()=>E});var i=s(3152),l=s(9060),n=s(8224),r=s(768),o=s(5640),a=s(7352),c=s(9740),d=s(9720),u=s(6936);function m(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{navigator:s}=(0,l.useContext)(u.yo);(0,l.useEffect)((()=>{if(!t)return;const i=s.block((t=>{const s={...t,retry(){i(),t.retry()}};e(s)}));return i}),[s,e,t])}((0,l.useCallback)((t=>{window.confirm(e)&&t.retry()}),[e]),t)}var g=s(2496);const h=(0,n.Os)({navigation_warning:{id:"navigationprompt.warning",description:"Prompt displayed when navigating on a dirty page (unsaved changes).",defaultMessage:"You have unsaved changed. If you continue, those change may be lost."}}),p=e=>{let{isDirty:t}=e;const{formatMessage:s}=(0,r.c)(),i=(0,l.useMemo)((()=>s(h.navigation_warning)),[s]),n=m(i,t);return(0,g.jsxs)(g.Fragment,{children:[t&&(0,g.jsx)(d.o,{onBeforeunload:()=>i}),n]})};var f=s(1560),y=s(8162);const _=(0,n.Os)({form_errors_title:{id:"status.form_errors_title",description:"Title for the form error box.",defaultMessage:"The form contains an error."},form_errors_alert:{id:"status.form_errors_alert",description:"Alert text for the form error box.",defaultMessage:"Please fix the described error(s) and continue."},form_errors_table_heading_error:{id:"status.form_errors_table_heading_error",description:"The form-errors will be displayed as table, with an error column. This is the column's title.",defaultMessage:"Error"},form_errors_table_heading_message:{id:"status.form_errors_table_heading_message",description:"The form-errors will be displayed as table, with a message column. This is the column's title.",defaultMessage:"Message"},save_success:{id:"status.save_success",description:"Toast for successfully saved form.",defaultMessage:"Changes saved."}});function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\n",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";return e.map((e=>e.trim())).map((e=>e.endsWith(".")||e.endsWith("!")||e.endsWith("?")?e:"".concat(e).concat(s))).join(t)}const b=e=>{var t,s;let{name:i,err:l}=e;const n=(0,r.c)(),c=null!==(t=null===(s=document.querySelector('[data-api-field="'.concat(i,'"] > label')))||void 0===s?void 0:s.textContent)&&void 0!==t?t:i,d=o.c(l).map((e=>(0,a.MZ)(n,e)||e.message));return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:c}),(0,g.jsx)("td",{children:v(d)})]})};const x=e=>{let{errors:t}=e;const{formatMessage:s}=(0,r.c)(),i=(0,l.useMemo)((()=>null!=t?function(e){const t=Object.entries(e).filter((e=>{let[t]=e;return!t.startsWith("_")}));return Object.fromEntries(t)}(t):void 0),[t]),n=(0,l.useMemo)((()=>{if(null==i||0===Object.keys(i).length)return[];const e=[];return Object.keys(i).forEach((t=>{const s=i[t];e.push((0,g.jsx)(b,{name:t,err:s},t))})),e}),[i]);if(null==i||0===Object.keys(i).length)return null;const o=(0,g.jsxs)("table",{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:s(_.form_errors_table_heading_error)}),(0,g.jsx)("th",{children:s(_.form_errors_table_heading_message)})]})}),(0,g.jsx)("tbody",{children:n})]});return(0,g.jsxs)(c.c,{severity:"danger",className:"form-errors",title:s(_.form_errors_title),children:[o,(0,g.jsx)(f.c,{className:"alert-post-message",children:s(_.form_errors_alert)})]})},C=e=>{let{dirty:t,submitting:s,errors:i,onSubmitSuccess:n}=e;const{formatMessage:o}=(0,r.c)(),a=(0,l.useRef)(!1),[c,d]=(0,l.useState)(!1);(0,l.useEffect)((()=>{!0===a.current&&!1===s&&null==i&&(d(!0),null===n||void 0===n||n()),a.current=s}),[s]),(0,l.useEffect)((()=>{t&&c&&d(!1)}),[t]);const u=(0,l.useCallback)((()=>{d(!1)}),[]);return(0,g.jsx)(y.c,{show:c,variant:"success",anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:u,children:o(_.save_success)})},j=e=>{let{dirty:t,submitting:s,errors:i,onSubmitSuccess:l}=e;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p,{isDirty:t}),(0,g.jsx)(x,{errors:i}),(0,g.jsx)(C,{dirty:t,submitting:s,onSubmitSuccess:l,errors:i})]})},E=e=>{let{onSubmitSuccess:t}=e;return(0,g.jsx)(i.Wu,{subscription:{dirty:!0,submitting:!0,submitErrors:!0},children:e=>{let{dirty:s,submitting:i,submitErrors:l}=e;return(0,g.jsx)(j,{dirty:s,submitting:i,errors:l,onSubmitSuccess:t})}})}},8162:(e,t,s)=>{s.d(t,{c:()=>d});var i=s(9060),l=s(4720),n=s(264),r=s.n(n),o=s(5404),a=s(2496);function c(e){return 0===e.length?"":1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.slice(1)}const d=(0,i.forwardRef)(((e,t)=>{let{show:s,autoHide:i=6e3,variant:n,anchorOrigin:d,onClose:u,children:m,className:g,...h}=e;const p=null!=d?"Toast-anchorOrigin".concat(c(d.vertical)).concat(c(d.horizontal)):void 0;return(0,a.jsx)(l.c,{show:s,delay:i,autohide:i>0,className:r()("simple-toast",g,p,{success:"success"===n}),onClose:u,...h,ref:t,children:(0,a.jsx)(l.c.Header,{closeButton:null!=u,children:(0,a.jsxs)(a.Fragment,{children:["success"===n&&(0,a.jsx)("div",{className:"toast-icon",children:(0,a.jsx)(o.c,{icon:"check",variant:"light",size:"2x"})}),(0,a.jsx)("span",{className:"toast-title",children:m})]})})})}))},8236:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ne});var i=s(9060),l=s(6936),n=s(768),r=s(8224),o=s(8712),a=s(7804),c=s(8716),d=s(1480),u=s(2672),m=s(6320),g=s(3536),h=s(8956),p=s(8168);const f=()=>e=>{e({...(0,a.gB)(h.q,m.y.RESET)})};var y=s(7173),_=s(8330);var v=s(4712),b=s(5404),x=s(8162),C=s(2496);const j=(0,r.Os)({clear_completed_tooltip:{id:"grocery_list.footer.clear_completed_tooltip",defaultMessage:"Clear completed"},copy_to_clipboard_tooltip:{id:"grocery_list.footer.copy_to_clipboard_tooltip",defaultMessage:"Copy to clipboard"},copy_to_clipboard_toast:{id:"grocery_list.footer.copy_to_clipboard_toast",defaultMessage:"Copied to clipboard."}}),E=e=>{let{list:t,isNew:s,items:l,onClearCompleted:r,isClearPending:o,onCopyToClipboard:a}=e;const{formatMessage:c}=(0,n.c)(),[d,u]=(0,i.useState)(!1),m=(0,i.useCallback)((()=>{a(),setTimeout((()=>{u(!0)}),0)}),[a]),g=(0,i.useCallback)((()=>{u(!1)}),[]);if(!t||s)return null;const h=null!=(null===l||void 0===l?void 0:l.find((e=>e.completed)));return(0,C.jsxs)("div",{className:"grocery-list-footer print-hidden",children:[null!=l&&l.length>0&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(v.c,{id:"clear-completed",variant:"primary",type:"button",disabled:(0,_.wL)()||!h||o,className:"check",onClick:r,tooltip:c(j.clear_completed_tooltip),children:(0,C.jsx)(b.c,{icon:"check",variant:"light",size:"2x"})}),(0,C.jsx)(v.c,{id:"copy-to-clipboard",variant:"outline-primary",type:"button",onClick:m,tooltip:c(j.copy_to_clipboard_tooltip),children:(0,C.jsx)(b.c,{icon:"clipboard"})})]}),(0,C.jsx)(x.c,{show:d,variant:"success",anchorOrigin:{horizontal:"center",vertical:"bottom"},onClose:g,children:c(j.copy_to_clipboard_toast)})]})};var T=s(264),w=s.n(T),S=s(3152),k=s(880),N=s(2136),M=s(2016),I=s(5600),L=s(7136),A=s(1700),R=s(8364),B=s(9804),q=s(9751),O=s(1560);const U=(0,r.Os)({groceryList_items_summary_empty:{id:"groceryList.items_summary_empty",description:"Summary for grocery list with no items.",defaultMessage:"Empty list"},groceryList_items_summary_completed:{id:"groceryList.items_summary_completed",description:"Number of items, all done.",defaultMessage:"{sum, plural, one {# item} other {# items}}, all done \ud83d\ude00"},groceryList_items_summary_incompleted:{id:"groceryList.items_summary_incompleted",description:"Number of items, with not completed sum.",defaultMessage:"{sum, plural, one {# item} other {# items}}, {sum_not_completed} not completed"},groceryList_filter_by:{id:"groceryList.filter_by",description:"Filter items",defaultMessage:"Show items: {filter}"},filter_off:{id:"groceryList.filter_items.ALL",defaultMessage:"All"},filter_active:{id:"groceryList.filter_items.ACTIVE",defaultMessage:"Not completed"},filter_completed:{id:"groceryList.filter_items.COMPLETED",defaultMessage:"Completed"}}),D=e=>{var t,s,l,r,o;let{list:a,items:c,filter:d,onChangeFilter:u}=e;const m=(0,n.c)(),{formatMessage:g}=m,h=null!==(t=null===c||void 0===c?void 0:c.length)&&void 0!==t?t:0,p=null!==(s=null===c||void 0===c?void 0:c.filter((e=>e.completed)).length)&&void 0!==s?s:0,f=null!==(l=null===c||void 0===c?void 0:c.filter((e=>!e.completed)).length)&&void 0!==l?l:0,y=(0,i.useCallback)(((e,t)=>{d===t?e.preventDefault():u(t)}),[d,u]),v=Object.values(ie).map((e=>(0,C.jsx)(M.c.Item,{active:d===e,onClick:t=>y(t,e),children:(0,_.$Q)(m,"groceryList.filter_items.",e)},e)));return(0,C.jsxs)("div",{className:"grocery-list-summary",children:[(0,C.jsxs)(O.c,{className:"summary",children:[0===h&&g(U.groceryList_items_summary_empty),h>0&&p===h&&g(U.groceryList_items_summary_completed,{sum:null!==(r=null===a||void 0===a?void 0:a.item_count)&&void 0!==r?r:0}),h>0&&f>0&&g(U.groceryList_items_summary_incompleted,{sum:null!==(o=null===a||void 0===a?void 0:a.item_count)&&void 0!==o?o:0,sum_not_completed:f})]}),(0,C.jsxs)(M.c,{className:"filter-items-dropdown",children:[(0,C.jsx)(M.c.Toggle,{variant:"outline-primary",id:"filter-items-button",disabled:null==a||0===a.item_count,children:g(U.groceryList_filter_by,{filter:(0,_.$Q)(m,"groceryList.filter_items.",d)})}),(0,C.jsx)(M.c.Menu,{children:v})]})]})},P=(0,r.Os)({new_title_placeholder:{id:"grocery_list.header.title_placeholder",defaultMessage:"(Enter a new title)"},confirm_delete_message:{id:"grocery_list.header.confirm_delete",description:"Are you sure you want to delete this list?",defaultMessage:"Are you sure you want to delete this list?"},edit_list:{id:"grocery_list.header.edit_list_button",defaultMessage:"Edit"},delete_list:{id:"grocery_list.header.delete_list_button",defaultMessage:"Delete"},back_to_lists:{id:"grocery_list.header.back_to_lists",defaultMessage:"To my grocery lists"}}),K=e=>{let{list:t,isNew:s,onCreate:r,onUpdate:o,onRemove:a,items:c,filter:d,onChangeFilter:u}=e;const m=(0,n.c)(),{formatMessage:g}=m,h=(0,l.IT)(),p=(0,l.i6)(),f=h.pathname.substring(0,h.pathname.lastIndexOf("/create")),y=(0,i.useRef)(null),v=(0,i.useRef)(null),[x,j]=(0,i.useState)(s),[E,T]=(0,i.useState)(!1),O=(0,i.useCallback)((()=>{T(!0)}),[]),U=(0,i.useCallback)((()=>{a()}),[a]),K=(0,i.useCallback)((()=>{T(!1)}),[]),F=null===t||void 0===t?void 0:t.slug;(0,i.useEffect)((()=>{x!==s&&j(s),E&&T(!1)}),[s,t]);const G=(0,i.useCallback)((()=>{j(!0),null!=v&&null!=v.current&&setTimeout((()=>{v.current.focus()}),1)}),[null===v||void 0===v?void 0:v.current]),W=(0,i.useCallback)((()=>{j(!1)}),[]),Q=(0,i.useCallback)((async e=>{if(s){const t={title:e.title};return r(t)}{const t={title:e.title};return o(t)}}),[s,r,o]),V=(0,i.useCallback)((()=>{s&&p("".concat(f,"/").concat(F)),j(!1),null!=y&&null!=y.current&&setTimeout((()=>{y.current.focus()}),1)}),[s,f,F,null===y||void 0===y?void 0:y.current]),z=(0,i.useMemo)((()=>t?{title:t.title}:{}),[t]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:w()({editing:x,"list-header":!0}),children:[(0,C.jsxs)("div",{className:"grocery-list-title-bar",tabIndex:-1,ref:y,children:[t&&!s&&!x&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(q.c,{id:"to-grocery-lists",variant:"transparent",to:(0,_.sL)("/grocery-lists"),className:"print-hidden",tooltip:g(P.back_to_lists),children:(0,C.jsx)(b.c,{icon:"caret-left"})}),(0,C.jsx)("h2",{children:t.title})]}),x&&(0,C.jsx)(S.QF,{initialValues:z,onSubmit:Q,subscription:{},render:e=>{let{form:t,handleSubmit:i}=e;return(0,C.jsxs)(k.c,{onSubmit:i,className:"change-grocery-list-title-form",children:[(0,C.jsx)(L.c,{onSubmitSuccess:V}),(0,C.jsx)(A.c,{form:t,initialValues:z}),(0,C.jsxs)("div",{className:"title-group",children:[(0,C.jsx)(R.c,{name:"title",placeholder:g(P.new_title_placeholder),maxLength:250,ref:v}),(0,C.jsx)(S.Wu,{subscription:{values:!0,submitting:!0},children:e=>{let{values:t,submitting:i}=e;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(N.c,{type:"submit",variant:"outline-primary",disabled:!t.title||i,children:(0,C.jsx)(b.c,{icon:"check",variant:"light",size:"2x"})}),!s&&(0,C.jsx)(N.c,{type:"button",variant:"outline-secondary",disabled:!t.title||i,onClick:W,children:(0,C.jsx)(b.c,{icon:"x",variant:"light",size:"2x"})})]})}})]})]})}}),!x&&(0,C.jsxs)(M.c,{children:[(0,C.jsx)(M.c.Toggle,{id:"grocery-header-option-menu",variant:"transparent",className:"print-hidden",children:(0,C.jsx)(b.c,{icon:"three-dots-vertical",variant:"light"})}),(0,C.jsxs)(M.c.Menu,{id:"grocery-header-option-menu-dropdown",children:[(0,C.jsx)(M.c.Item,{onClick:G,children:g(P.edit_list)}),(0,C.jsx)(M.c.Item,{onClick:O,children:g(P.delete_list)}),(0,C.jsx)(M.c.Divider,{}),(0,C.jsx)(B.c,{to:"".concat(f,"/create"),active:!1,children:m.messages["nav.grocery_list_create"]})]})]})]}),!s&&(0,C.jsx)(D,{list:t,items:c,filter:d,onChangeFilter:u})]}),(0,C.jsx)(I.c,{show:E,title:m.messages["recipe.confirm_delete_title"],acceptTitle:m.messages["recipe.confirm_delete_accept"],onAccept:U,onClose:K,acceptButtonProps:{variant:"danger"},children:m.formatMessage(P.confirm_delete_message)})]})};var F=s(6330),G=s(70),W=s(7352);const Q=(0,r.Os)({new_item_placeholder:{id:"groceryList.items.new_item_placeholder",description:"New item input, placeholder.",defaultMessage:"(New item)"}}),V=e=>{let{onAddItem:t}=e;const s=(0,n.c)(),{formatMessage:l}=s,[r,o]=(0,i.useState)(""),[a,c]=(0,i.useState)(),d=(0,i.useCallback)((async e=>{t({title:e}).then((()=>{o("")})).catch((e=>{c(e)}))}),[t]),u=(0,i.useCallback)((()=>{d(r)}),[d,r]),m=(0,i.useCallback)(((e,t)=>{t!==r&&o(t)}),[r]),g=(0,i.useCallback)((e=>{e.defaultPrevented||e.ctrlKey||e.shiftKey||"Enter"===e.key&&d(e.currentTarget.value)}),[d]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(G.cp,{name:"newItem",value:r,placeholder:l(Q.new_item_placeholder),errors:(0,W.MZ)(s,null===a||void 0===a?void 0:a.newItem),className:"new-item-input grocery-list-item-margin",onChange:m,onKeyDown:g}),(0,C.jsx)(N.c,{variant:"primary",disabled:0===r.length,onClick:u,className:"grocery-list-item-margin",children:(0,C.jsx)(b.c,{icon:"arrow-right",variant:"light"})})]})};var z=s(4120),H=s(7640);const J=(0,r.Os)({edit_button:{id:"grocery_list.item.edit_button",defaultMessage:"Edit"},delete_button:{id:"grocery_list.item.delete_button",defaultMessage:"Delete"},old_title:{id:"grocery_list.item.old_title_label",defaultMessage:"Item"},new_title:{id:"grocery_list.item.new_title_label",defaultMessage:"New Title"}}),Y=(0,i.forwardRef)(((e,t)=>{let{item:s,onSubmit:l,onSubmitSuccess:r,submitRef:o}=e;const{formatMessage:a}=(0,n.c)(),[c]=(0,i.useState)({oldTitle:s.title,newTitle:s.title}),d=(0,i.useCallback)((async e=>{if(s.title===e.newTitle)return null;const t={title:e.newTitle};return l(t)}),[s.title,l]);return(0,C.jsx)(S.QF,{initialValues:c,onSubmit:d,subscription:{},render:e=>{let{form:s,handleSubmit:i}=e;return(0,C.jsxs)(k.c,{onSubmit:i,ref:t,children:[(0,C.jsx)(L.c,{onSubmitSuccess:r}),(0,C.jsx)(A.c,{form:s,initialValues:c}),(0,C.jsx)(z.c,{children:(0,C.jsx)(H.c,{children:(0,C.jsx)(R.c,{name:"oldTitle",label:a(J.old_title),readOnly:!0})})}),(0,C.jsx)(z.c,{children:(0,C.jsx)(H.c,{children:(0,C.jsx)(R.c,{name:"newTitle",label:a(J.new_title),required:!0,autoFocus:!0})})}),(0,C.jsx)("button",{type:"submit",ref:o,className:"visibility-hidden",children:"Submit"})]})}})})),Z=e=>{let{item:t,className:s,onToggle:l,onUpdate:r,onDelete:o}=e;const{formatMessage:a}=(0,n.c)(),[c,d]=(0,i.useState)(!1),u=(0,i.useRef)(null),m=(0,i.useCallback)((()=>{l(t.id,!t.completed)}),[l,t]),g=(0,i.useCallback)((()=>{d(!0)}),[]),h=(0,i.useCallback)((e=>{e||d(!1)}),[]),p=(0,i.useCallback)((()=>{var e;null===(e=u.current)||void 0===e||e.click()}),[u.current]),f=(0,i.useCallback)((async e=>r(t.id,e)),[r,t.id]),y=(0,i.useCallback)((()=>{o(t.id)}),[o,t.id]);return(0,C.jsxs)("div",{className:w()("grocery-list-item",s),children:[(0,C.jsx)(F.c,{name:"".concat(t.listId,"-").concat(t.id,"-toggle"),label:t.title,value:t.completed,onChange:m,className:"grocery-list-item-cb grocery-list-item-margin"}),(0,C.jsxs)(M.c,{className:"options-dropdown print-hidden",children:[(0,C.jsx)(M.c.Toggle,{variant:"transparent",children:(0,C.jsx)(b.c,{icon:"three-dots-vertical",variant:"light"})}),(0,C.jsxs)(M.c.Menu,{id:"grocery-header-option-menu-dropdown",children:[(0,C.jsx)(M.c.Item,{onClick:g,children:a(J.edit_button)}),(0,C.jsx)(M.c.Item,{onClick:y,children:a(J.delete_button)})]})]}),c&&(0,C.jsx)(I.c,{show:!0,title:a(J.edit_button),onAccept:p,onClose:h,size:"sm",children:(0,C.jsx)(Y,{item:t,onSubmit:f,onSubmitSuccess:h,submitRef:u})})]})},$=(0,r.Os)({toggle_all:{id:"grocery_list.items.toggle_all",defaultMessage:"Toggle all"},filtered_items_info:{id:"grocery_list.items.filtered_items_info",defaultMessage:"({sum, plural, one {# filtered item} other {# filtered items}})"}});function X(e,t){switch(t){case ie.ALL:return e;case ie.ACTIVE:return e.filter((e=>!e.completed));case ie.COMPLETED:return e.filter((e=>e.completed));default:return e}}const ee=e=>{let{list:t,isNew:s,items:l,filter:r,onAddItem:o,onToggleItem:a,onToggleItems:c,onUpdateItem:d,onDeleteItem:u}=e;const{formatMessage:m}=(0,n.c)(),g=(0,i.useMemo)((()=>X(null!==l&&void 0!==l?l:[],r)),[X,l,r]),h=(0,i.useCallback)((()=>{const e=null==g.find((e=>!e.completed));c(g,!e)}),[c,g]);if(!t||s||null==l)return null;const p=g.map((e=>(0,C.jsx)("li",{children:(0,C.jsx)(Z,{item:e,className:"grocery-list-flex-container",onToggle:a,onUpdate:d,onDelete:u})},"".concat(e.listId,"-").concat(e.id)))),f=null!=l.find((e=>!e.completed)),y=l.length-g.length;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(F.c,{name:"toggle-all",label:m($.toggle_all),value:null!=l&&l.length>0&&!f,readOnly:null==l||0===g.length,errors:void 0,className:"toggle-all grocery-list-item-margin",onChange:h}),y>0&&(0,C.jsxs)("div",{className:"grocery-list-flex-container",children:[(0,C.jsx)(F.c,{name:"hidden-placeholder-toggle",value:!1,disabled:!0,className:"dummy-checkbox visibility-hidden"}),(0,C.jsx)(O.c,{className:"placeholder grocery-list-item-margin",children:m($.filtered_items_info,{sum:y})})]}),(0,C.jsxs)("ul",{className:"grocery-list-items",children:[p,(0,C.jsx)("li",{className:"print-hidden",children:(0,C.jsxs)("div",{className:"grocery-list-flex-container",children:[(0,C.jsx)(F.c,{name:"new-item-toggle",value:!1,disabled:!0,className:"dummy-checkbox visibility-hidden"}),(0,C.jsx)(V,{onAddItem:o})]})})]})]})},te=e=>{let{list:t,isNew:s,onCreate:i,onUpdate:l,onRemove:n,items:r,filter:o,onChangeFilter:a,onAddItem:c,onToggleItem:d,onToggleItems:u,onUpdateItem:m,onDeleteItem:g,isClearPending:h,onClearCompleted:p,onCopyToClipboard:f}=e;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(K,{list:t,isNew:s,onCreate:i,onUpdate:l,onRemove:n,items:r,filter:o,onChangeFilter:a}),(0,C.jsx)(ee,{list:t,isNew:s,items:r,filter:o,onAddItem:c,onToggleItem:d,onToggleItems:u,onUpdateItem:m,onDeleteItem:g}),(0,C.jsx)(E,{list:t,isNew:s,items:r,isClearPending:h,onClearCompleted:p,onCopyToClipboard:f})]})};var se=s(6272);let ie=function(e){return e.ALL="ALL",e.ACTIVE="ACTIVE",e.COMPLETED="COMPLETED",e}({});const le=e=>{let{isNew:t}=e;const s=(0,a.OY)(),n=(0,se.c)(),r=(0,l.i6)(),o=(0,a.w1)((e=>e.groceryList)),{item:f}=o,y=null===f||void 0===f?void 0:f.slug,v=(0,i.useRef)(),b=(0,a.w1)((e=>e.groceryListItems)),{items:x}=b,j=(0,i.useRef)(),[E,T]=(0,i.useState)(ie.ALL),[w,S]=(0,i.useState)(!1),[k,N]=(0,i.useState)(!1),M=(0,i.useCallback)((async e=>c.Su(s,e)),[]),I=(0,i.useCallback)((async e=>c.Jr(s,null!==y&&void 0!==y?y:"",e)),[y]),L=(0,i.useCallback)((()=>{null!=(null===f||void 0===f?void 0:f.id)?(S(!0),s(c.aE(f.id,null!==y&&void 0!==y?y:""))):n("Invalid state: list item may not be null")}),[null===f||void 0===f?void 0:f.id,y]),A=(0,i.useCallback)((()=>{var e;if(null==(null===f||void 0===f?void 0:f.id))return void n("Invalid state: list item may not be null");N(!0);const t=null!==(e=null===x||void 0===x?void 0:x.filter((e=>e.completed)))&&void 0!==e?e:[];(async(e,t,s)=>{const i=s.filter((e=>e.completed)).map((e=>e.id));return(0,d.cp)().delete(u.Q.bulk_list_item).send(i).then((()=>{e({...(0,a.gB)(h.q,h.I.DELETE_COMPLETED_ITEMS),payload:{listId:t,ids:i}})})).catch((t=>(0,g.iu)(e,t,h.q)))})(s,f.id,t).then((()=>{N(!1)}))}),[null===f||void 0===f?void 0:f.id,x]),R=(0,i.useCallback)((async e=>{var t;return(async(e,t,s)=>{e({...(0,a.gB)(p.qE,m.y.CREATE_START)});const i={list:t,...s};return(0,d.cp)().post(u.Q.list_item).send(i).then((s=>{const i=(0,p.qO)(t,s.body);e({...(0,a.gB)(p.qE,m.y.CREATE_SUCCESS),payload:i})})).catch((t=>(0,g.iu)(e,t,p.qE)))})(s,null!==(t=null===f||void 0===f?void 0:f.id)&&void 0!==t?t:0,e)}),[null===f||void 0===f?void 0:f.id]),B=(0,i.useCallback)(((e,t)=>{null!=(null===f||void 0===f?void 0:f.id)?s(((e,t,s)=>i=>{i({...(0,a.gB)(p.qE,m.y.UPDATE_START)}),(0,d.cp)().patch("".concat(u.Q.list_item).concat(t,"/")).send({completed:s}).then((()=>{i({...(0,a.gB)(p.qE,p.qy.TOGGLE_ITEM),payload:{listId:e,id:t}})})).catch((e=>i((0,g.GW)(e,p.qE))))})(f.id,e,t)):n("Invalid state: list item may not be null")}),[null===f||void 0===f?void 0:f.id]),q=(0,i.useCallback)(((e,t)=>{null!=(null===f||void 0===f?void 0:f.id)&&null!=x?s(((e,t,s)=>e=>{e({...(0,a.gB)(h.q,m.y.GET_START)});const i=t.filter((e=>e.completed!==s)).map((e=>({id:e.id,completed:s})));(0,d.cp)().patch(u.Q.bulk_list_item).send(i).then((()=>{e({...(0,a.gB)(h.q,h.I.TOGGLE_ITEMS),payload:i})})).catch((t=>e((0,g.GW)(t,h.q))))})(f.id,e,t)):n("Invalid state: list item may not be null")}),[null===f||void 0===f?void 0:f.id,x]),O=(0,i.useCallback)((async(e,t)=>{if(null!=(null===f||void 0===f?void 0:f.id))return(async(e,t,s,i)=>(e({...(0,a.gB)(p.qE,m.y.UPDATE_START)}),(0,d.cp)().patch("".concat(u.Q.list_item).concat(s,"/")).send(i).then((s=>{const i=(0,p.qO)(t,s.body);e({...(0,a.gB)(p.qE,m.y.UPDATE_SUCCESS),payload:i})})).catch((t=>(0,g.iu)(e,t,p.qE)))))(s,f.id,e,t);n("Invalid state: list item may not be null")}),[null===f||void 0===f?void 0:f.id]),U=(0,i.useCallback)((e=>{var t,i;null!=f?s((t=f.id,i=e,e=>{e({...(0,a.gB)(p.qE,m.y.DELETE_START)}),(0,d.cp)().delete("".concat(u.Q.list_item).concat(i,"/")).then((()=>{e({...(0,a.gB)(p.qE,m.y.DELETE_SUCCESS),payload:{listId:t,id:i}})})).catch((t=>e((0,g.GW)(t,p.qE))))})):n("Invalid state: list item may not be null")}),[f]);(0,i.useEffect)((()=>{null==v.current?v.current=f:w&&null!=v.current&&null==f&&r((0,_.sL)("/grocery-lists"))}),[f]),(0,i.useEffect)((()=>{null==j.current?j.current=x:k&&N(!1)}),[x]);const D=(0,i.useCallback)((()=>{if(null==f)return void n("Invalid state: list item may not be null");const e=function(e,t){const s="".concat(e.title,":"),i=t.map((e=>"".concat(e.completed?"[x]":"[ ]"," ").concat(e.title))).join("\n");return"".concat(s,"\n").concat(i)}(f,null!==x&&void 0!==x?x:[]);(0,_.ye)(e)}),[f,x]);return(0,C.jsx)(te,{list:f,isNew:t,onCreate:M,onUpdate:I,onRemove:L,items:x,filter:E,onChangeFilter:T,onAddItem:R,onToggleItem:B,onToggleItems:q,onUpdateItem:O,onDeleteItem:U,isClearPending:k,onClearCompleted:A,onCopyToClipboard:D})},ne=()=>{var e,t;const{formatMessage:s}=(0,n.c)(),v=(0,r.Os)({new_grocery_list:{id:"grocery_list.new_grocery_list",description:"New GroceryList documentTitle",defaultMessage:"New grocery list"}}),b=(0,l.W4)(),x=(0,l.i6)(),j=(0,a.OY)(),E=(0,a.w1)((e=>e.groceryList)),T=E.meta,w=(0,a.w1)((e=>e.groceryListItems)).meta,S=b.list,k="create"===S;return(0,i.useEffect)((()=>{S&&(window.scrollTo(0,0),k?(j(c.a_()),j(f())):j(c.AJ(S)))}),[S]),(0,i.useEffect)((()=>{var e,t;null!==(e=E.item)&&void 0!==e&&e.id&&!k&&j((t=E.item.id,e=>{e({...(0,a.gB)(h.q,m.y.GET_START)}),(0,d.cp)().get("".concat(u.Q.list_item,"?list=").concat(t)).then((s=>{e({...(0,a.gB)(h.q,m.y.GET_SUCCESS),payload:s.body.results.map((e=>(0,p.qO)(t,e)))})})).catch((t=>e((0,g.GW)(t,h.q))))}))}),[null===(e=E.item)||void 0===e?void 0:e.id,k]),(0,i.useEffect)((()=>{404===o.c(T.error,"status")&&x((0,_.oB)("/grocery-lists"))}),[T.error]),(0,i.useEffect)((()=>{404===o.c(w.error,"status")&&x((0,_.oB)("/grocery-lists"))}),[w.error]),(0,i.useEffect)((()=>()=>{j(c.a_()),j(f())}),[]),(0,C.jsx)(y.c,{title:k?s(v.new_grocery_list):null===(t=E.item)||void 0===t?void 0:t.title,children:(0,C.jsx)(le,{isNew:k})})}},8716:(e,t,s)=>{s.d(t,{AJ:()=>d,Ap:()=>p,Jr:()=>m,Su:()=>u,aE:()=>g,a_:()=>f});var i=s(1480),l=s(2672),n=s(7804),r=s(6320),o=s(3536),a=s(9228),c=s(8168);const d=e=>t=>{t({...(0,n.gB)(a.aK,r.y.GET_START)}),(0,i.cp)().get("".concat(l.Q.list).concat(e,"/")).then((e=>{var s;t((s=(0,a.qq)(e.body),{...(0,n.gB)(a.aK,r.y.GET_SUCCESS),payload:s}))})).catch((e=>t((0,o.GW)(e,a.aK))))},u=async(e,t)=>(e({...(0,n.gB)(a.aK,r.y.CREATE_START)}),(0,i.cp)().post(l.Q.list).send(t).then((t=>{const s=(0,a.qq)(t.body);e({...(0,n.gB)(a.aK,r.y.CREATE_SUCCESS),payload:s})})).catch((t=>(0,o.iu)(e,t,a.aK)))),m=async(e,t,s)=>(e({...(0,n.gB)(a.aK,r.y.UPDATE_START)}),(0,i.cp)().patch("".concat(l.Q.list).concat(t,"/")).send(s).then((t=>{const s=(0,a.qq)(t.body);e({...(0,n.gB)(a.aK,r.y.UPDATE_SUCCESS),payload:s})})).catch((t=>(0,o.iu)(e,t,a.aK)))),g=(e,t)=>s=>{s({...(0,n.gB)(a.aK,r.y.DELETE_START)}),(0,i.cp)().delete("".concat(l.Q.list).concat(t,"/")).then((()=>{s({...(0,n.gB)(a.aK,r.y.DELETE_SUCCESS),payload:{id:e}})})).catch((e=>s((0,o.GW)(e,a.aK))))};function h(e,t){return[e.quantity&&"0"!==e.quantity?e.quantity:void 0,t(e.measurement,e.quantity),e.title].filter(Boolean).join(" ")}const p=async(e,t,s,d)=>{const u=s.ingredientGroups.flatMap((e=>e.ingredients.map((e=>({list:t,title:h(e,d)}))))),m=s.subrecipes.map((e=>({list:t,title:h(e,d)}))),g=u.concat(m);return g.length>0?(e({...(0,n.gB)(a.aK,r.y.UPDATE_START)}),(0,i.cp)().post(l.Q.bulk_list_item).send(g).then((s=>{e({...(0,n.gB)(a.aK,a.mK.BULK_ADD),payload:s.body.map((e=>(0,c.qO)(t,e)))}),e({...(0,n.gB)(a.aK,r.y.UPDATE_SUCCESS)})})).catch((t=>e((0,o.GW)(t,a.aK))))):null},f=()=>e=>{e({...(0,n.gB)(a.aK,r.y.RESET)})}},4120:(e,t,s)=>{s.d(t,{c:()=>c});var i=s(264),l=s.n(i),n=s(9060),r=s(3576),o=s(2496);const a=n.forwardRef(((e,t)=>{let{bsPrefix:s,className:i,as:n="div",...a}=e;const c=(0,r.Ky)(s,"row"),d=(0,r.eG)(),u=(0,r.MZ)(),m="".concat(c,"-cols"),g=[];return d.forEach((e=>{const t=a[e];let s;delete a[e],null!=t&&"object"===typeof t?({cols:s}=t):s=t;const i=e!==u?"-".concat(e):"";null!=s&&g.push("".concat(m).concat(i,"-").concat(s))})),(0,o.jsx)(n,{ref:t,...a,className:l()(i,c,...g)})}));a.displayName="Row";const c=a},4720:(e,t,s)=>{s.d(t,{c:()=>C});var i=s(9060),l=s(264),n=s.n(l),r=s(5664),o=s(8660),a=s(2451),c=s(2496);const d={[o.um]:"showing",[o.Qx]:"showing show"},u=i.forwardRef(((e,t)=>(0,c.jsx)(a.c,{...e,ref:t,transitionClasses:d})));u.displayName="ToastFade";const m=u;var g=s(2624),h=s(3576),p=s(6224);const f=i.createContext({onClose(){}}),y=i.forwardRef(((e,t)=>{let{bsPrefix:s,closeLabel:l="Close",closeVariant:r,closeButton:o=!0,className:a,children:d,...u}=e;s=(0,h.Ky)(s,"toast-header");const m=(0,i.useContext)(f),y=(0,g.c)((e=>{null==m||null==m.onClose||m.onClose(e)}));return(0,c.jsxs)("div",{ref:t,...u,className:n()(s,a),children:[d,o&&(0,c.jsx)(p.c,{"aria-label":l,variant:r,onClick:y,"data-dismiss":"toast"})]})}));y.displayName="ToastHeader";const _=y,v=i.forwardRef(((e,t)=>{let{className:s,bsPrefix:i,as:l="div",...r}=e;return i=(0,h.Ky)(i,"toast-body"),(0,c.jsx)(l,{ref:t,className:n()(s,i),...r})}));v.displayName="ToastBody";const b=v,x=i.forwardRef(((e,t)=>{let{bsPrefix:s,className:l,transition:o=m,show:a=!0,animation:d=!0,delay:u=5e3,autohide:g=!1,onClose:p,onEntered:y,onExit:_,onExiting:v,onEnter:b,onEntering:x,onExited:C,bg:j,...E}=e;s=(0,h.Ky)(s,"toast");const T=(0,i.useRef)(u),w=(0,i.useRef)(p);(0,i.useEffect)((()=>{T.current=u,w.current=p}),[u,p]);const S=(0,r.c)(),k=!(!g||!a),N=(0,i.useCallback)((()=>{k&&(null==w.current||w.current())}),[k]);(0,i.useEffect)((()=>{S.set(N,T.current)}),[S,N]);const M=(0,i.useMemo)((()=>({onClose:p})),[p]),I=!(!o||!d),L=(0,c.jsx)("div",{...E,ref:t,className:n()(s,l,j&&"bg-".concat(j),!I&&(a?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,c.jsx)(f.Provider,{value:M,children:I&&o?(0,c.jsx)(o,{in:a,onEnter:b,onEntering:x,onEntered:y,onExit:_,onExiting:v,onExited:C,unmountOnExit:!0,children:L}):L})}));x.displayName="Toast";const C=Object.assign(x,{Body:b,Header:_})}}]);
//# sourceMappingURL=856.5851ed67.chunk.js.map